{"testcase": "Guidance on cross version breaking change for readonly and async operations in new api-versions", "query": "title: Guidance on cross version breaking change for readonly and async operations in new api-versions\n\nquestion: Hello team,\nWe have introduced new api-version to enhance the feature to support more functionalities in Microsoft.Edge\\Configurations resource-type.\nhttps://github.com/Azure/azure-rest-api-specs-pr/pull/25302\nExisting model has just one readonly field - provisioningState till now in all existing api-versions - 2024-09-01-preview, 2025-06-01 and 2025-08-01.\n```\n\"resource\":{\n\"properties\":{},\n\"tags\":{\n\"key64\":\"wwupf\"\n},\n\"location\": \"west us\"\n}\n```\nAs part of new business requirements, we are enhancing the feature to support more fields (optional) with LRO implementation.\nNow, with this new proposed change, PR is flagged with cross-version breaking-change.\n1.Since we've added additional optional fields in resource-type, new model has been created in generated swagger called ConfigurationPropertiesUpdate for patch operation. The ProvisioningState being readonly field, it is obviously not added as part of ConfigurationPropertiesUpdate - that is considered as breaking change as field removal. To our understanding, it is wrongly flagged as breaking change for readonly field renamed/removed for patch operation. Please correct our understanding in case.\n```\nThe new version is missing a property found in the old version. Was 'provisioningState' renamed or removed?\nNew: [configurations/preview/2025-12-01-preview/configurations.json#L3295:7](https://github.com/patelkunal/azure-rest-api-specs-pr/blob/0af8181bd0735d27df24ea3a6f373680d59119a4/specification/edge/resource-manager/Microsoft.Edge/configurations/preview/2025-12-01-preview/configurations.json#L3295:7)\n`definitions.ConfigurationPropertiesUpdate.properties`\nOld: configurations/stable/2025-08-01/configurations.json#L1337:7(https://github.com/Azure/azure-rest-api-specs-pr/blob/main/specification/edge/resource-manager/Microsoft.Edge/configurations/stable/2025-08-01/configurations.json#L1337:7)\n```\n2.We've changed CUD operations as LRO as we are bringing up MRG with this api-version as part of new business requirements. Although, it is based on customer input where customer selects if they want this then we will provision MRG via LRO operation. Otherwise, it is instantaneous sync response (200 status code). Given that these operations are exposed via LRO, those changes are included in the new api-versions. What should be the right approach to implement this requirement without having to introduce breaking change?\nThanks in advance.", "ground_truth": "The 'provisioningState' change in the PATCH request model seems like a bug fix if this field was always read-only.  When you get a breaking change review, if this is explained with an appropriate comment, this is likely to be justified as a bug fix.\nOn changing PATCH to synchronous.  ARM does support async PATCH operations, although REST API Guidelines discourage async PATCH operations.  If this operation is synchronous in the previous stable version, then this change is a real breaking change that you will need to justify in breaking change review.\nSimilarly, making PUT and DELETE Asynchronous is a breaking change if these operations were synchronous in the previous stable version is a real breaking change, and you will need to justify the change in a breaking change review.", "expected_knowledges": [{"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Deep-dive into breaking changes on spec PRs", "link": "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep"}, {"title": "Proper Service Versioning", "link": ""}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Breaking Change(Cross-Version) failure", "link": ""}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2", "link": ""}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Azure Versioning Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/VersioningGuidelines.md"}, {"title": "Does it make sense for a put operation with Location header?", "link": ""}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Azure Versioning Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/VersioningGuidelines.md"}, {"title": "Azure REST API Guidance", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/README.md"}, {"title": "Considerations for Service Design", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/ConsiderationsForServiceDesign.md"}, {"title": "Versioning", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/versioning"}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2", "link": ""}, {"title": "Tutorial: Create a new service spec", "link": "https://eng.ms/docs/products/azure-developer-experience/design/api-specs-pr/api-tutorial/api-tutorial"}, {"title": "Deep-dive into breaking changes on spec PRs", "link": "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep"}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "arm-resource-provisioning-state", "link": "https://azure.github.io/typespec-azure/docs/libraries/azure-resource-manager/rules/arm-resource-provisioning-state"}, {"title": "Need advice on how to change operation parameters on a breaking change", "link": ""}, {"title": "Versioning the LRO headers", "link": ""}, {"title": "`ProvisioningStateMustBeReadOnly` lintdiff violation in TypeSpec for ARM Service", "link": "https://azure.github.io/typespec-azure/docs/troubleshoot/status-read-only-error"}, {"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "Asynchronous resource delete", "link": ""}], "expected_references": [{"title": "Microsoft Azure REST API Guidelines", "link": "https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md"}, {"title": "arm-resource-provisioning-state", "link": "https://azure.github.io/typespec-azure/docs/libraries/azure-resource-manager/rules/arm-resource-provisioning-state"}, {"title": "Versioning", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/versioning"}, {"title": "Deep-dive into breaking changes on spec PRs", "link": "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep"}, {"title": "Versioning the LRO headers", "link": ""}, {"title": "Asynchronous resource delete", "link": ""}]}
