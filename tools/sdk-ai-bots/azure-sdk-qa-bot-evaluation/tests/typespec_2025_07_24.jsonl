{"testcase": "Updating from `@typespec/compiler@^0.65.0` -> `1.2.0`. Changes to `@service` decorator.", "query": "title: Updating from `@typespec/compiler@^0.65.0` -> `1.2.0`. Changes to `@service` decorator.\n\nquestion: Hello, looking to migrate versions of the TSP compiler, I ran into a problem with the `@service` decorator. With the older version (0.65.0) we were able to attached more information to the `@service` by defining it like this:\n```\n@service({\ntitle: \"Azure OpenAI Service\",\ntermsOfService: \"https://openai.com/policies/terms-of-use\",\ncontact: {\nname: \"OpenAI Support\",\nurl: \"https://help.openai.com\",\n},\nlicense: {\nname: \"MIT\",\nurl: \"https://github.com/openai/openai-openapi/blob/master/LICENSE\",\n},\n})\n```\nBut after the update, the only admissible field seems to be `title` . I tried looking at the documentation, but I was not able to find a replacement for this. Currently, in order to compile, I had to change the above code to:\n```\n@service(#{\ntitle: \"Azure OpenAI Service\",\n// termsOfService: \"https://openai.com/policies/terms-of-use\",\n// contact: #{\n//   name: \"OpenAI Support\",\n//   url: \"https://help.openai.com\",\n// },\n// license: #{\n//   name: \"MIT\",\n//   url: \"https://github.com/openai/openai-openapi/blob/master/LICENSE\",\n// },\n})\n```\nThank you for any help you can provide. Apologies if I missed something immensely obvious that I should be doing.", "ground_truth": "All the other options where never available and just silently dropped. If you meant to have this in the openapi document you should use @info from openapi library", "context": "", "response_length": 162}
{"testcase": "Swagger LintDiff - Analyze Code failing in PR", "query": "title: Swagger LintDiff - Analyze Code failing in PR\n\nquestion: I have the following PR that is currently failing: [[CTSRP] Update models for old version to be typespec compatible by joschung · Pull Request #23680 · Azure/azure-rest-api-specs-pr](https://github.com/Azure/azure-rest-api-specs-pr/pull/23680)\nThe error message isn't clear as to why the LintDiff is failing for my PR. Here is a picture of the error:\n```\nRun echo \"summary=$GITHUB_STEP_SUMMARY\" >> $GITHUB_OUTPUT\necho \"summary=$GITHUB_STEP_SUMMARY\" >> $GITHUB_OUTPUT\nnpm exec --no -- lint-diff \\\n--before before \\\n--after after \\\n--changed-files-path changed-files.txt \\\n--base-branch RP5aa5Dev \\\n--compare-sha 4c38db95d583774352f75251aaf02408935856a8 \\\n--out-file $GITHUB_STEP_SUMMARY\nshell: /usr/bin/bash -e {0}\nenv:\nNODE_OPTIONS: --max-old-space-size=8192\nUsing @microsoft.azure/openapi-validator version: 2.2.4\nfile:///home/runner/work/azure-rest-api-specs-pr/azure-rest-api-specs-pr/.github/shared/src/spec-model.js:150\nthrow new Error(`No affected swaggers found in specModel for ${swaggerPath}`);\n^\nError: No affected swaggers found in specModel for /home/runner/work/azure-rest-api-specs-pr/azure-rest-api-specs-pr/before/specification/azuredatatransfer/resource-manager/Private.AzureDataTransfer/stable/2025-05-21/azuredatatransfer.json\nat SpecModel.getAffectedSwaggers (file:///home/runner/work/azure-rest-api-specs-pr/.github/shared/src/spec-model.js:150:13)\nat async buildState (file:///home/runner/work/azure-rest-api-specs-pr/tools/lint-diff/dist/src/processChanges.js:117:28)\nat async getRunList (file:///home/runner/work/tools/lint-diff/dist/src/processChanges.js:29:27)\nat async runLintDiff (file:///home/tools/lint-diff/dist/src/lint-diff.js:78:53)\nat async main (file:///home/tools/lint-diff/dist/src/lint-diff.js::73.5)\nat async file://tools/cmd/lint-diff/js::1\nNode.js v22.17.0\nError Process completed with exit code 1.\n```\nHow do I fix this?", "ground_truth": "The error message points to the problem:\n```\nNo affected swaggers found in specModel for /home/runner/work/azure-rest-api-specs-pr/azure-rest-api-specs-pr/before/specification/azuredatatransfer/resource-manager/Private.AzureDataTransfer/stable/2025-05-21/azuredatatransfer.json\n```\nThis means, the file in the error message was not reachable, either directly or via a reference, from your readme.md.  Either add the file to your readme.md, or delete the file.", "context": "", "response_length": 459}
{"testcase": "Best replacement for char in TypeSpec?", "query": "title: Best replacement for char in TypeSpec?\n\nquestion: Hi TypeSpec Discussion,\nWe have a char type property in our contract, but I found that TypeSpec does not support char type.\nWhich type should I use in TypeSpec definition?", "ground_truth": "it is usually simpler and more explicit to add maxLength and minLength constraints to the custom scalar, [like this](https://typespec.io/playground/?e=%40typespec%2Fopenapi3&c=QG1heExlbmd0aCgxKQ0KQG1pbssPc2NhbGFyIGNoYXIgZXh0ZW5kcyBzdHJpbmc7DQo%3D&options=%7B%7D&vs=%7B%7D), rather than using the pattern decorator\n```\n@maxLength(1)\n@minLength(1)\nscalar char extends string;\n```", "context": "", "response_length": 377}
{"testcase": "TypeSpec Versioning Generic Question", "query": "title: TypeSpec Versioning Generic Question\n\nquestion: Hello, as of now our repository ([azure-rest-api-specs-pr/specification/azuredatatransfer/AzureDataTransfer.Management at RPSaaSDev · Azure/azure-rest-api-specs-pr](https://github.com/Azure/azure-rest-api-specs-pr/tree/RPSaaSDev/specification/azuredatatransfer/AzureDataTransfer.Management)) just introduced typespec and previously was using manual updates.\nRegarding API Version updates, I wanted to know if we can remove previous preview versions (4-11) from our [main.tsp](https://github.com/Azure/azure-rest-api-specs-pr/blob/RPSaaSDev/specification/azuredatatransfer/AzureDataTransfer.Management/main.tsp#L35):\n```\n/**\n* PLEASE DO NOT REMOVE - USED FOR CONVERTER METRICS\n* Generated by package: @autorest/openapi-to-typespec\n* Parameters used:\n*   isFullCompatible: false\n*   guessResourceKey: false\n* Version: 0.11.0\n* Date: 2025-05-13T20:15:12.229Z\n*/\nimport \"@typespec/rest\";\nimport \"@typespec/versioning\";\nimport \"@azure-tools/typespec-azure-core\";\nimport \"@azure-tools/typespec-azure-resource-manager\";\nimport \"./models.tsp\";\nimport \"./FlowProfile.tsp\";\nimport \"./Connection.tsp\";\nimport \"./Pipeline.tsp\";\nimport \"./Flow.tsp\";\nimport \"./ProviderActions.tsp\";\nusing Azure.ResourceManager;\nusing TypeSpec.Versioning;\n/**\n* Azure Data Transfer service resource provider\n*/\n@armProviderNamespace\n@service(#{ title: \"azuredatatransferrp\" })\n@versioned(Versions)\n@armCommonTypesVersion(Azure.ResourceManager.CommonTypes.Versions.v5)\nnamespace Private.AzureDataTransfer;\n/**\n* The available API versions.\n*/\nenum Versions {\n/**\n* The 2025-04-11-preview API version.\n*/\n@useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)\n@useDependency(Azure.Core.Versions.v1_0_Preview_1)\nv2025_04_11_preview: \"2025-04-11-preview\",\n/**\n* The 2025-05-21 API version.\n*/\n@useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)\n@useDependency(Azure.Core.Versions.v1_0_Preview_1)\nv2025_05_21: \"2025-05-21\",\n/**\n* The 2025-05-30-preview API version.\n*/\n@useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)\n@useDependency(Azure.Core.Versions.v1_0_Preview_1)\nv2025_05_30_preview: \"2025-05-30-preview\",\n}\ninterface Operations extends Azure.ResourceManager.Operations {}\n```\nor if there is a recommended safe practice.\nFor the newest version I used the @added/removed decorators to add/remove certain properties/fields from the newest/olders versions. However, I'm not sure I want to always include the @added/removed decorators as we create new versions.\nHow do we manage this?\nAlso, does removing from the newest version count as a breaking change? I was under the impression that as long as we support it in prior versions and our backend supports it, we should be find to remove certain fields and properties.", "ground_truth": "It is generally recommended that you have only one active preview api, but this has to be balanced with ARM retention requirements for preview APIs.  For APIs that are not public to customers,  I don't see any need for them to remain once your tests no longer use those api versions", "context": "", "response_length": 282}
{"testcase": "TypeSpec Avocado failing even with labels tag", "query": "title: TypeSpec Avocado failing even with labels tag\n\nquestion: I have the following PR that is currently failing: [[CTSRP] Update models for old version to be typespec compatible by joschung · Pull Request #23680 · Azure/azure-rest-api-specs-pr](https://github.com/Azure/azure-rest-api-specs-pr/pull/23680)\nHere is a picture of the avocado failure:\n```\nRun Avocado\nRun AVOCADO_OUTPUT_FILE=$RUNNER_TEMP/avocado.ndjson\navocadoDir: /home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager\navocadoDir: /home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager\n{\"level\":\"Error\",\"code\":\"MISSING_APIS_IN_DEFAULT_TAG\",\"message\":\"The default tag should contain all APIs. The API path `/providers/private.azuredatatransfer/validateschema` is not in the default tag. Please make sure the missing API swaggers are in the default tag.\",\"tag\":\"default\",\"readMeUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/readme.md\",\"jsonUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.azuredatatransfer.json\",\"path\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.AzureDataTransfer/preview/2025-04-11-preview/azuredatatransfer.json\",\"apiPath\":\"/providers/private.azuredatatransfer/validateschema\"}\n{\"level\":\"Error\",\"code\":\"MISSING_APIS_IN_DEFAULT_TAG\",\"message\":\"The default tag should contain all APIs. The API path `/providers/private.azuredatatransfer/listapprovedschemas` is not in the default tag. Please make sure the missing API swaggers are in the default tag.\",\"tag\":\"default\",\"readMeUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/readme.md\",\"jsonUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.AzureDataTransfer/preview/2025-04-11-preview/azuredatatransfer.json\",\"path\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.AzureDataTransfer/preview/2025-04-11-preview/azuredatatransfer.json\",\"apiPath\":\"/providers/private.azuredatatransfer/listapprovedschemas\"}\n{\"level\":\"Error\",\"code\":\"MISSING_APIS_IN_DEFAULT_TAG\",\"message\":\"The default tag should contain all APIs. The API path `/subscriptions/{}/resourceGroups/{}/providers/private.azuredatatransfer/pipelines/{}/listschemas` is not in the default tag. Please make sure the missing API swaggers are in the default tag.\",\"tag\":\"default\",\"readMeUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/readme.md\",\"jsonUrl\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.AzureDataTransfer/preview/2025-04-11-preview/azuredatatransfer.json\",\"path\":\"/home/runner/work/azure-rest-api-specs-pr/c93b354fd9c14905bb574a8834c46d9b/specification/azuredatatransfer/resource-manager/private.AzureDataTransfer/preview/2025-04-11-preview/azuredatatransfer.json\",\"apiPath\":\"/subscriptions/{}/resourceGroups/{}/providers/private.azuredatatransfer/pipelines/{}/listschemas\"}\nerrors: 3\nError: Process completed with exit code 1.\n```\nHowever, I have the Approved-Avocado label on my PR so I'm unsure as to why this is still running?", "ground_truth": "Your PR is merged, so I can't see the status checks anymore.  My guess is you confused the intermediate check \"Swagger Avocado - Analyze Code\" with the final required check \"Swagger Avocado\".", "context": "", "response_length": 191}
