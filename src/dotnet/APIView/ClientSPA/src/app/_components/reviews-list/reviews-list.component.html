<div class="container-fluid">
    <!--<p-sidebar [(visible)]="rightSideBarVisible" position="right" styleClass="right-side-bar">
        <div class="pt-4">
            <div class="mb-4">
                <span class="p-float-label">
                    <p-multiSelect [options]="languages" [(ngModel)]="selectedLanguages" defaultLabel="Filter Language.." [filter]="true" optionLabel="label" display="chip"></p-multiSelect>
                    <label for="ms-languages">Filter Language</label>
                </span>
            </div>
            <div class="mb-4">
                <span class="p-float-label">
                    <p-multiSelect [options]="state" [(ngModel)]="selectedState" defaultLabel="Filter State.." optionLabel="label" [filter]="false" display="chip"></p-multiSelect>
                    <label for="ms-state">Filter State</label>
                </span>
            </div>
            <div class="mb-4">
                <span class="p-float-label">
                    <p-multiSelect [options]="status" [(ngModel)]="selectedStatus" defaultLabel="Filter Status.." optionLabel="label" [filter]="false" display="chip"></p-multiSelect>
                    <label for="ms-status">Filter Status</label>
                </span>
            </div>
            <div class="mb-4">
                <span class="p-float-label">
                    <p-multiSelect [options]="type" [(ngModel)]="selectedType" defaultLabel="Filter Type.." optionLabel="label" [filter]="false" display="chip"></p-multiSelect>
                    <label for="ms-type">Filter Type</label>
                </span>
            </div>
        </div>
    </p-sidebar> -->
    <div class="row">
        <p-table
            [value]="reviews"
            dataKey="id"
            [scrollable]="true"
            scrollHeight="calc(100vh - 140px)"
            responsiveLayout="stack"
            [lazy]="true"
            [lazyLoadOnInit]="false"
            [virtualScroll]="true"
            [virtualScrollDelay]="0"
            [virtualScrollItemSize]="49"
            (onLazyLoad)="onLazyLoad($event)"
            [tableStyle]="{ 'min-width': '50rem' }"
            styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm">
            <!--<ng-template pTemplate="caption">
                <div class="d-flex justify-content-between">
                    <p-button label="Create Reviews" icon="pi pi-plus"></p-button>
                    <span class="p-input-icon-left me-2">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" id="reviews-search" placeholder="Search Reviews..." />
                    </span>
                    <p-button label="Filter Reviews" (click)="rightSideBarVisible = true" icon="pi pi-filter"></p-button>
                </div>
            </ng-template>-->
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:3%">Lanuage</th>
                    <th style="width:auto">Name<p-sortIcon class="ms-2" field="name"></p-sortIcon></th>
                    <th style="width:12%">Author</th>
                    <th style="width:12%">Last Updated<p-sortIcon class="ms-2" field="lastUpdated"></p-sortIcon></th>
                    <th style="width:3%">Type</th>
                    <th style="width:3%">Status</th>
                    <th style="width:3%">State</th>
                    <th style="width:4%">Revs<p-sortIcon class="ms-2" field="noOfRevisions"></p-sortIcon></th>
                </tr>
                <tr>
                    <th>
                        <p-columnFilter id="langauge-filter" field="languages" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="languages" [filter]="false" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ option.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="name" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="author" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="lastUpdated" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter id="type-filter" field="type" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="type" [filter]="false" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ option.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter id="status-filter" field="status" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="status" [filter]="false" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ option.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter id="state-filter" field="state" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="state" [filter]="false" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ option.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-review>
                <tr>
                    <td>
                        <img src="assets/images/{{review.language | lowercase}}-original.svg" alt="{{review.language}}" width="30">
                    </td>
                    <td>{{ review.name }}</td>
                    <td>
                        <p-chip label="{{review.author}}" image="https://github.com/{{review.author}}.png?size=40"></p-chip>
                    </td>
                    <td>{{ review.lastUpdated | timeago }}</td>
                    <td>
                        <p-badge [value]="review.status" styleClass="{{review.status}}"></p-badge>
                    </td>
                    <td>
                        <p-badge [value]="review.state" styleClass="{{review.state}}"></p-badge>
                    </td>
                    <td>
                        <p-badge [value]="review.type" styleClass="{{review.type}}"></p-badge>
                    </td>
                    <td>{{ review.noOfRevisions }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>