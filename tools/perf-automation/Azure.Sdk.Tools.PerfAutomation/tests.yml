Languages:
  Net:
    DefaultVersions:
    - netcoreapp3.1
    OptionalVersions:
    - net5.0

  Java:
    DefaultVersions:
    - 1.8.0_292
    OptionalVersions:
    - 15.0.2+7

  JS:
    DefaultVersions:
    - 14.17.6
    OptionalVersions:
    - 16.8.0
  
  Python:
    DefaultVersions:
    - 3.7.11
    OptionalVersions:
    - 3.9.7

  Cpp:
    DefaultVersions:
    - default
    OptionalVersions:
    - optional

Services:
- Service: sample
  Languages:
    Net:
      Project: common/Perf/Azure.Sample.Perf/Azure.Sample.Perf.csproj
      PackageVersions:
      - Azure.Test.Perf: source
    Java:
      Project: sdk/template/azure-template-perf
      PackageVersions:
      - perf-test-core: source
    JS:
      Project: sdk/test-utils/perfstress
      PackageVersions:
      - "@azure/test-utils-perfstress": source
  Tests:
  - Test: no-op
    Arguments:
    - --warmup 0 --duration 1
    TestNames:
      Net: NoOp
      Java: noop
      JS: NoOp

- Service: storage-blob
  Languages:
    Net:
      Project: sdk/storage/Azure.Storage.Blobs/perf/Azure.Storage.Blobs.Perf/Azure.Storage.Blobs.Perf.csproj
      PackageVersions:
      - Azure.Storage.Blobs: 12.9.0
      - Azure.Storage.Blobs: source
    Java:
      Project: sdk/storage/azure-storage-perf
      PackageVersions: &java-storage-package-versions
      - azure-storage-blob: 12.12.0
        azure-storage-file-share: 12.10.0
        azure-storage-file-datalake: 12.6.0
        reactor-core: 3.4.6
      - azure-storage-blob: source
        azure-storage-file-share: source
        azure-storage-file-datalake: source
        reactor-core: source
      AdditionalArguments: &java-additional-arguments
        warmup: 15
        duration: 15
    JS:
      Project: sdk/storage/perf-tests/storage-blob
      PackageVersions:
      - "@azure/storage-blob": 12.6.0
      - "@azure/storage-blob": source
    Python:
      Project: sdk/storage/azure-storage-blob
      PackageVersions:
      - azure-storage-blob: 12.8.1
      - azure-storage-blob: source
    Cpp:
      Project: azure-storage-blobs-perf
      PackageVersions:
      - azure-storage-blobs: source

  Tests:
  - Test: download
    Arguments: &storage-sizes
    - --size 1 --warmup 0 --duration 1
    - --size 10240 --parallel 64
    - --size 10485760 --parallel 32
    - --size 1073741824 --parallel 1 --warmup 60 --duration 60
    - --size 1073741824 --parallel 8 --warmup 60 --duration 60
    TestNames:
      Net: DownloadBlob
      Java: downloadblob
      JS: StorageBlobDownloadTest
      Python: DownloadTest
      Cpp: DownloadBlob

  - Test: upload
    Arguments: *storage-sizes
    TestNames:
      Net: UploadBlob
      Java: uploadblob
      JS: StorageBlobUploadTest
      Python: UploadTest

  - Test: upload-file
    Arguments:
    - --size 268435456 --parallel 1 --warmup 30 --duration 30
    - --size 268435456 --parallel 1 --warmup 30 --duration 30 --max-concurrency 8
    TestNames:
      Python: UploadFromFileTest

  - Test: list-blobs
    Arguments: &storage-blob-counts
    - --count 1 --warmup 0 --duration 1
    - --count 5 --parallel 64
    - --count 500 --parallel 32
    - --count 50000 --parallel 32 --warmup 60 --duration 60
    TestNames:
      Net: GetBlobs
      Java: listblobs
      JS: StorageBlobListTest
      Python: ListBlobsTest

  - Test: download-sas-http-client
    Arguments:
    - --size 10240 --parallel 256
    TestNames:
      Net: DownloadSasUriHttpClient

  - Test: download-sas-http-pipeline
    Arguments:
    - --size 10240 --parallel 256
    TestNames:
      Net: DownloadSasUriHttpPipeline

  - Test: download-sas-blob-client
    Arguments:
    - --size 10240 --parallel 256
    TestNames:
      Net: DownloadSasUriBlobClient

- Service: storage-blob-track1
  Languages:
    Net:
      Project: sdk/storage/Azure.Storage.Blobs/perf/Microsoft.Azure.Storage.Blob.Perf/Microsoft.Azure.Storage.Blob.Perf.csproj
      PackageVersions:
      - Microsoft.Azure.Storage.Blob: 11.2.2
    Java:
      Project: sdk/storage/microsoft-azure-storage-perf
      PackageVersions:
      - azure-storage: 8.6.5
      AdditionalArguments: *java-additional-arguments
    JS:
      Project: sdk/storage/perf-tests/storage-blob-track-1
      PackageVersions:
      - "@azure/storage-blob": 10.5.0
    Python:
      Project: sdk/storage/azure-storage-blob
      PackageVersions:
      - azure-storage-blob: 2.1.0

  Tests:
  - Test: download
    Arguments: *storage-sizes
    TestNames:
      Net: DownloadBlob
      Java: downloadblob
      JS: StorageBlobDownloadTest
      Python: LegacyDownloadTest

  - Test: upload
    Arguments: *storage-sizes
    TestNames:
      Net: UploadBlob
      Java: uploadblob
      JS: StorageBlobUploadTest
      Python: LegacyUploadTest

  - Test: list-blobs
    Arguments: *storage-blob-counts
    TestNames:
      Net: GetBlobs
      Java: listblobs
      JS: StorageBlobListTest
      Python: LegacyListBlobsTest

- Service: storage-file-share
  Languages:
    Net:
      Project: sdk/storage/Azure.Storage.Files.Shares/perf/Azure.Storage.Files.Shares.Perf/Azure.Storage.Files.Shares.Perf.csproj
      PackageVersions:
      - Azure.Storage.Files.Shares: 12.7.0
      - Azure.Storage.Files.Shares: source
    Java:
      Project: sdk/storage/azure-storage-perf
      PackageVersions: *java-storage-package-versions
      AdditionalArguments:
        warmup: 15
        duration: 15
    JS:
      Project: sdk/storage/perf-tests/storage-file-share
      PackageVersions:
      - "@azure/storage-file-share": 12.6.0
      - "@azure/storage-file-share": source      
    Python:
      Project: sdk/storage/azure-storage-file-share
      PackageVersions:
      - azure-storage-file-share: 12.5.0
      - azure-storage-file-share: source

  Tests:
  - Test: download
    Arguments: *storage-sizes
    TestNames:
      Net: DownloadFile
      Java: downloadfileshare
      JS: StorageFileShareDownloadTest
      Python: DownloadTest

  - Test: upload
    Arguments: *storage-sizes
    TestNames:
      Net: UploadFile
      Java: uploadfileshare
      JS: StorageFileShareUploadTest
      Python: UploadTest

- Service: storage-file-data-lake
  Languages:
    Net:
      Project: sdk/storage/Azure.Storage.Files.DataLake/perf/Azure.Storage.Files.DataLake.Perf/Azure.Storage.Files.DataLake.Perf.csproj
      PackageVersions:
      - Azure.Storage.Files.DataLake: 12.7.0
      - Azure.Storage.Files.DataLake: source
    Java:
      Project: sdk/storage/azure-storage-perf
      PackageVersions: *java-storage-package-versions
      AdditionalArguments:
        warmup: 15
        duration: 15
    JS:
      Project: sdk/storage/perf-tests/storage-file-datalake
      PackageVersions:
      - "@azure/storage-file-datalake": 12.5.0
      - "@azure/storage-file-datalake": source
    Python:
      Project: sdk/storage/azure-storage-file-datalake
      PackageVersions:
      - azure-storage-file-datalake: 12.4.0
      - azure-storage-file-datalake: source

  Tests:
  - Test: download
    Arguments: *storage-sizes
    TestNames:
      Net: Read
      Java: readfiledatalake
      JS: StorageDFSReadTest
      Python: DownloadTest

  - Test: upload
    Arguments: *storage-sizes
    TestNames:
      Net: Upload
      Java: uploadfiledatalake
      JS: StorageDFSUploadTest
      Python: UploadTest

- Service: keyvault-secrets
  Languages:
    Net:
      Project: sdk/keyvault/Azure.Security.KeyVault.Secrets/perf/Azure.Security.KeyVault.Secrets.Perf.csproj
      PackageVersions:
      - Azure.Security.KeyVault.Secrets: 4.0.0
      - Azure.Security.KeyVault.Secrets: 4.2.0
      - Azure.Security.KeyVault.Secrets: source
    Java:
      Project: sdk/keyvault/azure-security-keyvault-perf
      PackageVersions:
      - azure-security-keyvault-certificates: 4.0.0
        azure-security-keyvault-keys: 4.0.0
        azure-security-keyvault-secrets: 4.0.0
        reactor-core: 3.3.0.RELEASE
      - azure-security-keyvault-certificates: 4.2.2
        azure-security-keyvault-keys: 4.3.2
        azure-security-keyvault-secrets: 4.3.2
        reactor-core: 3.4.8
      - azure-security-keyvault-certificates: source
        azure-security-keyvault-keys: source
        azure-security-keyvault-secrets: source
        reactor-core: source
    JS:
      Project: sdk/keyvault/perf-tests/keyvault-secrets
      PackageVersions:
      - "@azure/storage-file-datalake": 12.5.0
      - "@azure/storage-file-datalake": source
    Python:
      Project: sdk/keyvault/azure-keyvault-secrets
      PackageVersions:
      - azure-keyvault-secrets: 4.2.0
      - azure-keyvault-secrets: source
  Tests:
  - Test: get-secret
    Arguments:
    - --warmup 0 --duration 1
    - --parallel 64
    TestNames:
      Net: GetSecret
      Java: getsecret
      Python: GetSecretTest

  - Test: list-secrets
    Arguments: &keyvault-counts
    - --count 1 --warmup 0 --duration 1
    - --count 5 --parallel 64
    - --count 500 --parallel 32
    TestNames:
      Net: ListSecrets
      Java: listsecrets

- Service: eventhubs
  Languages:
    Net:
      Project: sdk/eventhub/Azure.Messaging.EventHubs/perf
      PackageVersions:
      - Azure.Messaging.EventHubs: 5.6.0
      - Azure.Messaging.EventHubs: source
  Tests:
  - Test: publish-batches-to-gateway
    Arguments:
    - --body-size 1 --batch-size 1 --warmup 0 --duration 1
    - --body-size 500 --batch-size 50 --parallel 64
    TestNames:
      Net: PublishBatchesToGateway
