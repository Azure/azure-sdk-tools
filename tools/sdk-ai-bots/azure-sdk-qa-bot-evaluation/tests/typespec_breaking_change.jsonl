{"testcase": "Guidance on cross version breaking change for readonly and async operations in new api-versions", "query": "title: Guidance on cross version breaking change for readonly and async operations in new api-versions\n\nquestion: Hello team,\nWe have introduced new api-version to enhance the feature to support more functionalities in Microsoft.Edge\\Configurations resource-type.\nhttps://github.com/Azure/azure-rest-api-specs-pr/pull/25302\nExisting model has just one readonly field - provisioningState till now in all existing api-versions - 2024-09-01-preview, 2025-06-01 and 2025-08-01.\n```\n\"resource\":{\n\"properties\":{},\n\"tags\":{\n\"key64\":\"wwupf\"\n},\n\"location\": \"west us\"\n}\n```\nAs part of new business requirements, we are enhancing the feature to support more fields (optional) with LRO implementation.\nNow, with this new proposed change, PR is flagged with cross-version breaking-change.\n1.Since we've added additional optional fields in resource-type, new model has been created in generated swagger called ConfigurationPropertiesUpdate for patch operation. The ProvisioningState being readonly field, it is obviously not added as part of ConfigurationPropertiesUpdate - that is considered as breaking change as field removal. To our understanding, it is wrongly flagged as breaking change for readonly field renamed/removed for patch operation. Please correct our understanding in case.\n```\nThe new version is missing a property found in the old version. Was 'provisioningState' renamed or removed?\nNew: [configurations/preview/2025-12-01-preview/configurations.json#L3295:7](https://github.com/patelkunal/azure-rest-api-specs-pr/blob/0af8181bd0735d27df24ea3a6f373680d59119a4/specification/edge/resource-manager/Microsoft.Edge/configurations/preview/2025-12-01-preview/configurations.json#L3295:7)\n`definitions.ConfigurationPropertiesUpdate.properties`\nOld: configurations/stable/2025-08-01/configurations.json#L1337:7(https://github.com/Azure/azure-rest-api-specs-pr/blob/main/specification/edge/resource-manager/Microsoft.Edge/configurations/stable/2025-08-01/configurations.json#L1337:7)\n```\n2.We've changed CUD operations as LRO as we are bringing up MRG with this api-version as part of new business requirements. Although, it is based on customer input where customer selects if they want this then we will provision MRG via LRO operation. Otherwise, it is instantaneous sync response (200 status code). Given that these operations are exposed via LRO, those changes are included in the new api-versions. What should be the right approach to implement this requirement without having to introduce breaking change?\nThanks in advance.", "ground_truth": "The 'provisioningState' change in the PATCH request model seems like a bug fix if this field was always read-only.  When you get a breaking change review, if this is explained with an appropriate comment, this is likely to be justified as a bug fix.\nOn changing PATCH to synchronous.  ARM does support async PATCH operations, although REST API Guidelines discourage async PATCH operations.  If this operation is synchronous in the previous stable version, then this change is a real breaking change that you will need to justify in breaking change review.\nSimilarly, making PUT and DELETE Asynchronous is a breaking change if these operations were synchronous in the previous stable version is a real breaking change, and you will need to justify the change in a breaking change review.", "expected_knowledges": [{"title": "Breaking Change(Cross-Version) failure | answer", "link": ""}, {"title": "How to versioning name pattern? | answer", "link": ""}, {"title": "Reproducibility", "link": "https://typespec.io/docs/handbook/reproducibility"}, {"title": "Breaking Change Policy | Breaking Change Philosophy | Bugs", "link": "https://typespec.io/docs/handbook/breaking-change-policy"}, {"title": "Need advice on how to change operation parameters on a breaking change | answer", "link": ""}, {"title": "Breaking Change Policy | Categories of Breaking Changes | Emitter output", "link": "https://typespec.io/docs/handbook/breaking-change-policy"}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2 | 1. Policy Overview and Motivation | 1.1 Motivation", "link": ""}, {"title": "Resolving OpenAPI Breaking Change Violations | Migrating ARM Specifications | Visibility Changes for `nextLink` and `value` Properties", "link": "https://azure.github.io/typespec-azure/docs/migrate-swagger/faq/breakingchange"}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2 | 1. Policy Overview and Motivation | 1.3 Purpose", "link": ""}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2 | 3. Detailed Breaking Change Process", "link": ""}, {"title": "Breaking Change Policy | Categories of Breaking Changes", "link": "https://typespec.io/docs/handbook/breaking-change-policy"}, {"title": "Docs", "link": "https://github.com/Azure/azure-rest-api-specs/wiki/Swagger-BreakingChanges"}, {"title": "Adding a Preview Version when the Last Version was Stable", "link": "https://azure.github.io/typespec-azure/docs/howtos/versioning/arm/04-preview-after-stable"}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2 | 4. Notes", "link": ""}, {"title": "Versioning | Introduction", "link": "https://typespec.io/docs/getting-started/getting-started-rest/06-versioning"}, {"title": "Changing Property to Optional with Default | answer", "link": ""}, {"title": "Versioning the LRO headers | answer", "link": ""}, {"title": "ARM Resource Types | Designing Resource-specific Properties | Required and Optional properties and Property Defaults", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/resource-type"}, {"title": "Patch Resource # | Rules ## | General impact of violating the rules ###", "link": "https://github.com/cloud-and-ai-microsoft/resource-provider-contract/blob/master/v1.0/patch-resource.md"}, {"title": "missing readonly property for page response value | answer", "link": "https://azure.github.io/typespec-azure/docs/migrate-swagger/faq/breakingchange"}, {"title": "ARM Resource Types | Designing Resource-specific Properties", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/resource-type"}, {"title": "Versioning | Simple Scenarios | Converting an Operation from Synchronous to Asynchronous", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/versioning"}, {"title": "Understanding the OpenAPI Changes | Handling \"readOnly\" in Model Schemas", "link": "https://azure.github.io/typespec-azure/docs/migrate-swagger/faq/mustread"}, {"title": "Proxy API Reference | Proxy API reference ## | Exposing Available Operations ###", "link": "https://github.com/cloud-and-ai-microsoft/resource-provider-contract/blob/master/v1.0/proxy-api-reference.md"}, {"title": "How can I change the operation template of an operation in newer versions | Workaround", "link": "https://azure.github.io/typespec-azure/docs/troubleshoot/versioning_operation_template_changes"}], "expected_references": [{"title": "ARM Resource Types | Designing Resource-specific Properties", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/resource-type"}, {"title": "How can I change the operation template of an operation in newer versions | Workaround", "link": "https://azure.github.io/typespec-azure/docs/troubleshoot/versioning_operation_template_changes"}, {"title": "Versioning | Simple Scenarios | Converting an Operation from Synchronous to Asynchronous", "link": "https://azure.github.io/typespec-azure/docs/howtos/arm/versioning"}, {"title": "Azure Versioning and Breaking Changes Policy V1.3.2 | 1. Policy Overview and Motivation | 1.1 Motivation", "link": ""}]}
