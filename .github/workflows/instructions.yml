name: Validate LLM Instructions Files
#foo

on:
  push:
    branches:
      - main
    paths:
      - 'eng/common/instructions/**'
      - 'tools/azsdk-cli/Azure.Sdk.Tools.Cli/Tools/**'
      - 'eng/scripts/Verify-McpToolReferences.ps1'
      - '.github/workflows/instructions.yml'
  pull_request:
    paths:
      - 'eng/common/instructions/**'
      - 'tools/azsdk-cli/Azure.Sdk.Tools.Cli/Tools/**'
      - 'eng/scripts/Verify-McpToolReferences.ps1'
      - '.github/workflows/instructions.yml'

jobs:
  verify-mcp-tools:
    name: Verify MCP Tool References
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: azsdk-cli verify
        shell: pwsh
        run: ./eng/scripts/Verify-McpToolReferences.ps1 -InstructionsPath ./eng/common/instructions/azsdk-tools -ToolSourcePath ./tools/azsdk-cli/Azure.Sdk.Tools.Cli/Tools
