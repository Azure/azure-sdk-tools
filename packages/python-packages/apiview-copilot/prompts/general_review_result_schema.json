{
    "type": "json_schema",
    "json_schema": {
        "name": "general_review_result",
        "strict": true,
        "schema": {
            "additionalProperties": false,
            "type": "object",
            "properties": {
                "status": {
                    "type": "string",
                    "description": "Success if the request has no improvements. Error if there are improvements."
                },
                "improvements": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "line_no": {
                                "type": "integer",
                                "description": "Line number of the improvement."
                            },
                            "bad_code": {
                                "type": "string",
                                "description": "the original code that was bad, cited verbatim. Should contain a single line of code."
                            },
                            "suggestion": {
                                "type": "string",
                                "description": "the suggested code which fixes the bad code. If code is not feasible, a description is fine."
                            },
                            "comment": {
                                "type": "string",
                                "description": "a comment about the improvement."
                            }
                        },
                        "required": ["line_no", "bad_code", "suggestion", "comment"]
                    },
                    "description": "list of improvements if any"
                }
            },
            "required": ["status", "improvements"]
        }
    }
}
