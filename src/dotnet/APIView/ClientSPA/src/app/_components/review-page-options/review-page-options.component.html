<app-page-options-section sectionName="Approval">
    <ul class="list-group">
        <li class="list-group-item text-center">
            <span *ngIf="!activeAPIRevisionIsApprovedByCurrentUser" class="small text-muted">Approve this API Revision</span>
            <div *ngIf="!activeAPIRevisionIsApprovedByCurrentUser; else elseBlock" class="d-grid gap-2">
                <button class="btn btn-success" type="button">Approve</button>
            </div>
            <ng-template #elseBlock>
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-secondary" type="button">Revert API Approval</button>
                </div>
            </ng-template>
            <span class="small text-muted mt-1">{{activeAPIRevisionApprovalMessage}}</span>
        </li>
        <li class="list-group-item">
            <span class="small text-muted">Approves the current revision of the API</span>
            <div class="d-grid gap-2">
                <button class="btn btn-success" type="button">Approved</button>
            </div>
        </li>
    </ul>
</app-page-options-section>

<app-page-options-section sectionName="Request Reviewers" [collapsedInput]="false">
    <p-multiSelect 
        [options]="preferedApprovers" 
        [(ngModel)]="selectedApprovers" 
        placeholder="Request Reviewers"
        [style]="{'width':'100%'}">
            <ng-template let-approver pTemplate="selectedItems">
                <div *ngIf="approver && approver.length > 0" class="inline-flex align-items-center gap-2 px-1">
                    <span>{{ approver }},</span>
                </div>
                <div *ngIf="!approver || approver.length === 0">Select Reviewers</div>
            </ng-template>
            <ng-template let-approver pTemplate="item">
                <div class="flex align-items-center gap-2">
                    <img 
                        src="https://github.com/{{ approver }}.png?size=30"
                        class="me-2 rounded"
                        style="width: 30px" />
                    <span>{{ approver }}</span>
                </div>
            </ng-template>
            <ng-template let-approver pTemplate="footer">
                <div class="py-2 px-3">
                    <b>
                    {{ selectedApprovers ? selectedApprovers.length : 0 }}
                    </b> 
                    item{{ (selectedApprovers ? selectedApprovers.length : 0) > 1 ? 's' : '' }} selected.
                </div>
            </ng-template>
    </p-multiSelect>

</app-page-options-section>

<app-page-options-section sectionName="Page Settings">
    <ul class="list-group">
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="showCommentsSwitch"
            (onChange)="onCommentsSwitchChange($event)" />
            <label class="ms-2">Comments</label>
        </li>
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="showSystemCommentsSwitch"
            (onChange)="onShowSystemCommentsSwitchChange($event)" />
            <label class="ms-2">System Comments</label>
        </li>
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="showDocumentationSwitch"
            (onChange)="onShowDocumentationSwitchChange($event)" />
            <label class="ms-2">Documentation</label>
        </li>
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="showLineNumbersSwitch" 
            (onChange)="onShowLineNumbersSwitchChange($event)" />
            <label class="ms-2">Line Numbers</label>
        </li>
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="showLeftNavigationSwitch"
            (onChange)="onShowLeftNavigationSwitchChange($event)" />
            <label class="ms-2">Left Navigation</label>
        </li>
        <li *ngIf="isDiffView" class="list-group-item">
            <label class="small mx-1 fw-semibold" for="diff-style-select">Diff Style :</label>
            <p-dropdown 
                (onChange)="onDiffStyleChange($event)"
                [options]="diffStyleOptions" 
                [(ngModel)]="selectedDiffStyle"
                inputId="diff-style-select"
                optionLabel="label" />
        </li>
    </ul>
</app-page-options-section>

<app-page-options-section sectionName="API Revision Options">
    <ul class="list-group">
        <li class="list-group-item">
            <p-inputSwitch [(ngModel)]="markedAsViewSwitch"
            (onChange)="onMarkedAsViewedSwitchChange($event)" />
            <label class="ms-2">Mark As Viewed</label>
        </li>
    </ul>
</app-page-options-section>

<app-page-options-section sectionName="Change History" [collapsedInput]="true">
    <ul class="list-group">
        <li class="list-group-item change-history">
            <p-timeline [value]="activeAPIRevision?.changeHistory">
                <ng-template pTemplate="marker" let-changeHistory>
                    <span [style]="{ 'background-color': changeHistory.color }">
                        <i [class]="changeHistoryIcons[changeHistory.changeAction]"></i>
                    </span>
                </ng-template>
                <ng-template pTemplate="content" let-changeHistory>
                    <div class="p-text-primary small">{{ changeHistory.changeAction | titlecase }}</div>
                    <div class="p-text-secondary small">{{ changeHistory.changedBy }}</div>
                    <div class="p-text-secondary small">{{ changeHistory.changedOn | timeago }}</div>
                </ng-template>
            </p-timeline>
        </li>
    </ul>
</app-page-options-section>