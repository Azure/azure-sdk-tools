jobs:
  - job: test
    timeoutInMinutes: 10
    strategy:
      matrix:
        MacLatest:
          pool.name: Azure Pipelines
          pool.image: macos-latest
        Mac12:
          pool.name: Azure Pipelines
          pool.image: macos-12
    pool:
      name: $(pool.name)
      vmImage: $(pool.image)
    steps:
      - checkout: self

      - task: AzurePowershell@5
        displayName: Test
        inputs:
          azureSubscription: azure-sdk-tests
          azurePowerShellVersion: LatestVersion
          scriptType: pscore
          scriptLocation: inlineScript
          inlineScript: |
            Write-Host "BEBRODER"

      - bash: sudo chown -R runner ~/.Azure
        displayName: (MacOS) Grant access to ~/.Azure

      - task: Powershell@2
        displayName: Setup Az Modules and Dogfood Environment
        inputs:
          targetType: inline
          pwsh: true
          script: |
            eng/common/scripts/Import-AzModules.ps1

