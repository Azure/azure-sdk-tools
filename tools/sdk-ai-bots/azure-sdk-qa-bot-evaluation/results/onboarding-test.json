[
    {
        "testcase": "Fixing Invalid Type Specifications and SDK Regeneration in Released APIs",
        "expected": {
            "answer": "To fix invalid type specifications in previously released APIs and regenerate SDKs, you should follow these steps:\nFix the Spec and Follow Breaking Change Process: If your fix is a breaking change or a bug fix in an already released API version, you must submit a PR against the main branch of the public Azure REST API specs repository. If your PR is labeled with BreakingChangeReviewRequired or VersioningReviewRequired, you must get approval from the Breaking Change Review Board (see aka.ms/brch). For bug fixes, you may be able to apply the BreakingChange-Approved-BugFix label yourself, but the process should be strictly followed.\nARM Review: Once the breaking change review is resolved, request ARM review. Note: You cannot proceed to ARM review until the breaking change process is complete.\nSDK Generation and Release Plan:\nFor TypeSpec-based management plane SDKs (Java, JavaScript, Python, Go):\nUse the release planner to request SDK generation for the fixed API version. This will create a tracking issue in the Azure/sdk-release-request repo.\nThe Shanghai SDK team will generate the SDK and open a PR in the corresponding SDK repository. However, it is the service owner's responsibility to follow up, complete any customizations, and drive the PR through review and merge. You will be notified when the PR is created.\nAfter the SDK is generated, follow the release guidance to publish the package.\nFor .NET: Service owners must generate the SDK manually using the updated TypeSpec, then create and submit a PR to the azure-sdk-for-net repository.\nManual Follow-Up: While the initial SDK PRs for Java, JavaScript, Python, and Go are created automatically after you request generation, you are still responsible for any manual updates, review, and merging of these PRs. For .NET, all steps are manual after generation.\nSummary:\nYou do not need to manually create PRs in each SDK repo for Java, JavaScript, Python, and Go; the release planner and SDK generation pipelines will create draft PRs for you after you request generation.\nYou must still review, customize (if needed), and drive the SDK PRs to completion.\nFor .NET, the process is manual: you generate and submit the PR yourself.\nAlways ensure you have breaking change and ARM approvals before requesting SDK generation.\nFor more details, see the referenced documentation below.",
            "reference_urls": []
        },
        "actual": {
            "answer": "To address an invalid type specification in previously released APIs (one preview, one stable), you must follow Azure's established breaking change and versioning process, with a strong focus on minimizing customer impact and maintaining compliance with Azure policies.\n\n**Recommended Process (Step-by-Step):**\n\n1. **Branching and Spec Fix:**\n   - Create a new branch in the appropriate Azure REST API specs repo (public or private) to implement the fix. Your changes must conform to the [Azure Versioning and Breaking Changes Policy].\n   - If your fix involves a breaking change, especially in a stable (GA) API version, you must submit the change for review to the Breaking Changes Review Board. Label your PR with `VersioningReviewRequired` or `BreakingChangeReviewRequired` as needed; this will block further review until the board approves.\n   - For preview versions, breaking changes are allowed between preview versions, but not between GA versions. Ensure the fix is backward compatible with the latest GA if possible.\n\n2. **PR and Review:**\n   - Create a PR against the correct branch (typically `main` for public or `RPSaaSMaster` for private) in the specs repo, using the correct PR template (ARM/Control Plane or Data Plane).\n   - The PR will trigger automated checks for breaking changes and versioning compliance. If your PR gets one of the breaking change labels, follow the guidance at [aka.ms/brch] and wait for the Breaking Changes Board to review.\n   - Once approved by the board, continue with ARM (management plane) or Data Plane review as appropriate.\n\n3. **Release Plan:**\n   - Create or update your release plan in the [Azure SDK Release Planner]. Link your API spec PR to the plan, and complete the API readiness milestone.\n\n4. **SDK Regeneration:**\n   - **TypeSpec-based Management Plane SDKs:**\n     - After your spec fix is merged, you must submit a request in the Release Planner to regenerate the SDKs. The automation will create draft PRs for all Tier-1 languages (except .NET, which may require additional steps) in their respective repos.\n     - You do NOT need to manually create PRs for each language SDK repo; the Release Planner/automation handles this.\n     - Review the generated SDK PRs, mark them as 'Ready for review', and address any feedback from the Azure SDK team. You are responsible for merging the PRs after approval.\n     - Once all SDK PRs are merged, use the release pipeline links in the Release Planner to publish the SDKs.\n   - **OpenAPI-based SDKs:**\n     - SDK generation is triggered upon release request, with .NET requiring manual generation steps (see [Generate .NET management plane SDK]).\n\n5. **Documentation and Changelog:**\n   - Ensure the `CHANGELOG.md` is updated with the correct release date and a summary of changes, including any breaking changes or bug fixes. This is critical for a successful release pipeline run.\n\n6. **Final Steps:**\n   - Ensure your service version is deployed and available before the SDK release date.\n   - Monitor the Release Planner and address any issues blocking release readiness.\n\n**Summary:**\n- Breaking changes require approval from the Breaking Changes Board.\n- Use the Release Planner to automate SDK regeneration after spec fix is merged; no manual PRs for each language repo are required for TypeSpec-based management plane SDKs.\n- Follow the standard review and release pipeline steps.\n\nIf you encounter automation issues or your SDK PRs do not appear, use the troubleshooting steps in the Release Planner (including tagging @copilot in PR comments).\n\nFor further help, use the [SDK Release Support channel].\n",
            "reference_urls": [
                "https://eng.ms/docs/products/azure-developer-experience/plan/upcoming_release_planner_change",
                "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep",
                "https://eng.ms/docs/products/azure-developer-experience/develop/sdk-release/sdk-release-prerequisites",
                "https://eng.ms/docs/products/azure-developer-experience/develop/sdk-develop",
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs-pr/api-specs-pr",
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs/api-versioning"
            ]
        },
        "similarity": 4.0,
        "gpt_similarity": 4.0,
        "similarity_result": "pass",
        "similarity_threshold": 4,
        "groundedness": 5.0,
        "gpt_groundedness": 5.0,
        "groundedness_reason": "The RESPONSE accurately and thoroughly conveys all essential information from the CONTEXT without introducing unsupported details or omitting critical points.",
        "groundedness_result": "pass",
        "groundedness_threshold": 3.0,
        "response_completeness": 4.0,
        "response_completeness_result": "pass",
        "response_completeness_threshold": 3,
        "response_completeness_reason": "The response is mostly complete, accurately reflecting the process and responsibilities, but misses some minor details and explicit steps found in the ground truth.",
        "overall_score": 6.0
    },
    {
        "testcase": "TypeSpec SDK API Reviews Process for Management Plane Services",
        "expected": {
            "answer": "Welcome to the TypeSpec and Azure SDK onboarding process! Since you are working on a new preview API version and have generated the SDKs (autogenerated SDK API reviews), here is how you get these reviewed by the specific SDK teams:\nManagement Plane (ARM) SDKs Do NOT Require Arch Board Review:\nFor management plane (ARM) libraries like Azure Fleet, you do NOT need to schedule an SDK Architecture Board meeting. The review process is handled through the pull request (PR) workflow in the Azure REST API Specs repository.\nSDK Review Process for Your Scenario:\nAfter your REST API spec PR is approved and merged, the next steps are:\nEnsure you have a release plan created in the Azure SDK Release Planner.\nThe SDK generation and release planning will involve tracking the release plan milestones, where you can monitor which language SDKs are being generated and when they are ready for review.\nAssigning Specific SDK Teams as Reviewers:\nSDK teams are automatically assigned as reviewers for their respective language repos using the CODEOWNERS file in each SDK repository. If your service is not already listed in the CODEOWNERS file for a given language SDK repo, you should add your service and the appropriate GitHub users or teams to ensure SDK team visibility and review (see the reference for details).\nYou can also @-mention specific SDK team members in the generated SDK PRs in each language repository if you need urgent attention.\nHow to Track and Request Review:\nAfter the SDK PR is generated (either manually or via automation), monitor the PR in the respective SDK repo. The SDK team responsible for that language will review according to the CODEOWNERS assignment.\nIf you do not see timely review or need to escalate, reach out to the language-specific Teams channel or the SDK repo maintainers directly.\nSummary of Steps:\nConfirm your service is listed in the CODEOWNERS file for each SDK repo.\nCreate/track your release plan in the Azure SDK Release Planner.\nMonitor and follow up on the generated SDK PRs for reviews.\nFor Management Plane, no Arch Board meeting is needed; reviews are handled via the PR process.\nLet me know if you need guidance on updating CODEOWNERS or navigating the release planner!\nReferences below provide detailed steps and process links.",
            "reference_urls": []
        },
        "actual": {
            "answer": "To get your autogenerated SDK API reviews assigned to and reviewed by the specific SDK language teams after submitting your management-plane TypeSpec PR, you should follow the updated process for TypeSpec-generated management plane SDKs:\n\n1. **Use the Release Planner**: Submit a 'Generate SDK' request in the [Azure SDK Release Planner](https://aka.ms/azsdk/sdk-release-planner) for your API version (2025-07-01-preview). This triggers the automation to create draft SDK PRs for each Tier 1 language (.NET, Python, Java, JavaScript/TypeScript, Go).\n\n2. **Monitor SDK PRs**: The release planner will show links to the draft SDK PRs in each language repo. As the service owner, you must verify the content of each PR.\n\n3. **Request Review**: Once an SDK PR is ready for review, go to the PR in GitHub and click the 'Ready for review' button. This action automatically assigns the Azure SDK language teams (via CODEOWNERS) as reviewers for that PR.\n\n4. **SDK Team Review**: The Azure SDK language teams will review and provide feedback. You need to address their comments.\n\n5. **Merge PRs**: Once approved, you (the service owner) are responsible for merging the PRs.\n\n**Key Points:**\n- You do NOT manually assign reviewers; clicking 'Ready for review' in the PR triggers assignment to the relevant SDK language teams per CODEOWNERS.\n- The process is managed and tracked via the Release Planner, which blocks SDK release until all required PRs are merged.\n- For troubleshooting or support, use the [Azure SDK Onboarding channel](https://aka.ms/azsdk/support/onboarding-channel).\n\n**Next Steps:**\n- Ensure your release plan is created and updated in the Release Planner.\n- Locate the draft SDK PR links for each language and follow the verification and review process above.\n- Once all SDK PRs are merged and ready, proceed to the SDK release steps as outlined in the Release Planner.\n",
            "reference_urls": [
                "https://eng.ms/docs/products/azure-developer-experience/plan/upcoming_release_planner_change",
                "https://eng.ms/docs/products/azure-developer-experience/develop/sdk-develop",
                "https://eng.ms/docs/products/azure-developer-experience/develop/supporting-sdk-customers/codeowners"
            ]
        },
        "similarity": 4.0,
        "gpt_similarity": 4.0,
        "similarity_result": "pass",
        "similarity_threshold": 4,
        "groundedness": NaN,
        "gpt_groundedness": NaN,
        "groundedness_reason": NaN,
        "groundedness_result": NaN,
        "groundedness_threshold": NaN,
        "response_completeness": 4.0,
        "response_completeness_result": "pass",
        "response_completeness_threshold": 3,
        "response_completeness_reason": "The response is mostly complete, covering the main process and steps, but omits minor details about CODEOWNERS file maintenance and escalation options for review delays.",
        "overall_score": 0.0
    },
    {
        "testcase": "Reusing Release Plans from Preview to GA",
        "expected": {
            "answer": "You cannot simply reuse your public preview release plan for your GA (General Availability) SDK release. Each major milestone (public preview, GA, etc.) requires its own release plan in the Azure SDK Release Planner. The GA release plan will have additional requirements, such as more comprehensive testing, additional samples, and potentially a final architecture review. You should create a new release plan specifically for your GA SDK release to ensure all required steps and validations are tracked and completed. The release planner helps you track your progress and ensures you meet all the prerequisites for a GA release.\nHowever, you can use your public preview release plan as a reference or template to speed up the creation of your GA release plan, but it is important to go through the official process and create a dedicated GA plan.\nIf you have already completed some steps during public preview (such as generating SDKs or completing reviews), those may not need to be repeated, but you must still document and track them in the GA release plan.",
            "reference_urls": []
        },
        "actual": {
            "answer": "No, you should not reuse a release plan created for a public preview SDK release when moving to GA (General Availability) SDK release for the same service. According to Azure SDK onboarding requirements, each major release phase (e.g., public preview, GA) requires its own release plan to track milestones, readiness, and compliance specific to that stage. The release plan for public preview focuses on initial feedback and limited requirements, whereas the GA release plan ensures full readiness, additional samples and tests, and compliance with broader Azure SDK policies (such as breaking change review and documentation verification). Therefore, you need to create a new GA release plan in the Release Planner to properly manage and validate all steps required for GA release. This ensures accurate tracking and reporting for your product lifecycle in the Azure ecosystem.",
            "reference_urls": [
                "https://eng.ms/docs/products/azure-developer-experience/onboard/requirements",
                "https://eng.ms/docs/products/azure-developer-experience/faqs/faqs",
                "https://eng.ms/docs/products/azure-developer-experience/faqs/glossary",
                "https://eng.ms/docs/products/azure-developer-experience/plan/track-progress"
            ]
        },
        "similarity": 5.0,
        "gpt_similarity": 5.0,
        "similarity_result": "pass",
        "similarity_threshold": 4,
        "groundedness": 5.0,
        "gpt_groundedness": 5.0,
        "groundedness_reason": "The response is fully grounded, complete, and directly supported by the provided context without introducing unsupported details or omitting critical information.",
        "groundedness_result": "pass",
        "groundedness_threshold": 3.0,
        "response_completeness": 4.0,
        "response_completeness_result": "pass",
        "response_completeness_threshold": 3,
        "response_completeness_reason": "The response is mostly complete, accurately covering the main requirements and rationale, but omits minor details about using the previous plan as a template and carrying over completed steps.",
        "overall_score": 6.6
    },
    {
        "testcase": "Target Branch Selection for Onboarding New Resource Types",
        "expected": {
            "answer": "When onboarding new resource types (especially for ARM/Control Plane APIs), the right target branch depends on the stage of your API and whether your work should be public or private:\nIf your resource types are still under development or in private preview (not ready for public visibility), you should target the RPSaaSMaster branch in the private repo: azure-rest-api-specs-pr.\nOnce your API is ready for public preview or GA, you should target the main branch in the public repo: azure-rest-api-specs.\nYou mentioned getting a branch protection error. This is likely because the main branch in the private repo is read-only and mirrored from the public repo. You cannot merge directly into main in the private repo. For private work, use RPSaaSMaster. For public release, use main in the public repo.\nSummary:\nUse azure-rest-api-specs-pr/RPSaaSMaster for private onboarding and early-stage work.\nUse azure-rest-api-specs/main for public onboarding and final publishing.\nIf you need to update your PR, change the target branch to RPSaaSMaster in the private repo for onboarding new resource types. If your resource is ready for public consumption, move it to a PR against the public repo's main branch.\nLet me know if you need help updating your PR or have questions about the process!",
            "reference_urls": []
        },
        "actual": {
            "answer": "For onboarding new resource types, the correct target branch depends on the lifecycle stage of your API version:\n\n- If your resource types (API version) are in **private preview**, you should target the `RPSaaSMaster` branch in the private repo (`azure-rest-api-specs-pr`). This branch is specifically for RPaaS-based ARM specifications in private preview.\n- If your resource types (API version) are in **public preview** or **GA**, you must target the `main` branch in the public repo (`azure-rest-api-specs`). The public `main` branch is where all API versions in GA and public preview are published for all customers.\n\nBranch protection errors typically occur when you try to merge into a branch that does not allow direct PR merges (e.g., `main` in the private repo is mirrored and read-only, so you cannot merge PRs into it).\n\n**How to resolve your branch protection error:**\n- If your API version is in private preview, retarget your PR to `RPSaaSMaster` in `azure-rest-api-specs-pr`.\n- If your API version is ready for public preview or GA, retarget your PR to `main` in `azure-rest-api-specs` (public repo).\n- Do not target `main` in the private repo (`azure-rest-api-specs-pr`)\u2014it is read-only and intended only for mirroring from the public repo.\n\n**Next steps:**\n1. Determine the lifecycle stage (private preview vs. public preview/GA) of your API/resource type.\n2. Retarget your PR to the appropriate branch based on the guidance above.\n3. If you need to move a spec from private to public, follow the process outlined in the documentation for moving private specs to public.\n\nIf you continue to encounter branch protection errors, ensure you have the correct permissions and that you are targeting the correct branch per the lifecycle stage.",
            "reference_urls": [
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs-pr/api-versions-and-branches",
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs-pr/api-specs-pr",
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs-pr/pr-move-private-to-public"
            ]
        },
        "similarity": 5.0,
        "gpt_similarity": 5.0,
        "similarity_result": "pass",
        "similarity_threshold": 4,
        "groundedness": NaN,
        "gpt_groundedness": NaN,
        "groundedness_reason": NaN,
        "groundedness_result": NaN,
        "groundedness_threshold": NaN,
        "response_completeness": 5.0,
        "response_completeness_result": "pass",
        "response_completeness_threshold": 3,
        "response_completeness_reason": "The response contains all necessary and relevant information from the ground truth, accurately reflecting each statement and claim without missing any key details.",
        "overall_score": 0.0
    },
    {
        "testcase": "Resolving .NET SDK Breaking Change Detection for Required-to-Optional Parameter Changes",
        "expected": {
            "answer": "Making a previously required parameter optional is considered a breaking change, and this can cause .NET SDK generation to fail during pull request validation, as you've observed. This typically triggers the SDK breaking change detection pipeline.\nTo resolve this:\nUnderstand the Error: Check the details of the failing pipeline\u2014the logs should indicate which parameters are affected and why the .NET SDK (or other SDKs) consider this a breaking change.\nSuppress the Breaking Change: If the change is intentional and necessary (and has been approved or is in the process of approval), you should add a suppression for the breaking change:\nDownload the SDK generation artifacts for .NET from the failed pipeline. There will be an HTML report listing the specific breaking changes detected (you can usually find these under Absent SDK breaking changes suppressions).\nCreate or update a sdk-suppressions.yaml file in your service's TypeSpec folder (where your tspconfig.yaml lives).\nCopy the relevant suppression items into this file following the format shown in the docs (see reference below).\nCommit this change to your PR. The validation pipeline will then recognize the suppression and let the PR proceed to review.\nGet Review/Approval: SDK reviewers will verify the suppression. If everything is in order, they will approve it and your PR can move forward.\nConsider Versioning Guidance: For some scenarios (like making a property optional in new API versions only), you may also want to use the @madeOptional decorator in TypeSpec to indicate intentional verisoned behavior (see second reference).\nIf you need more help, reach out in the .NET SDK team's channel or consult your language team as they're the first point of contact for SDK build failures.\nLet me know if you need guidance on preparing the suppression file or interpreting the error log!",
            "reference_urls": []
        },
        "actual": {
            "answer": "When you change an API parameter from required to optional in your OpenAPI spec, this is considered a breaking change according to Azure REST API versioning policy\u2014even if it appears benign. The .NET SDK generation pipeline detects such changes and blocks PR validation to ensure backward compatibility for published API versions. \n\nTo resolve this:\n1. **Review the Breaking Change Policy:** If the change is intentional and aligns with the Azure breaking change guidelines, you need to ensure that the change is either in a new API version or, if correcting a spec bug, is labeled appropriately.\n2. **Apply the Correct Label:** If your change is a bug fix (making the spec match actual service behavior), you can apply the `BreakingChange-Approved-BugFix` label to your PR. If it's benign and not breaking at the REST API level, use `BreakingChange-Approved-Benign`. See [aka.ms/brch] for details on these labels.\n3. **Versioning:** If this is a new feature or change, you must introduce a new API version in your spec, as changes to published versions are not allowed except for bug fixes.\n4. **Suppressing Validation (Not Recommended):** Permanent suppression of breaking change checks is not possible for this type of change. Only use suppression for certain semantic/model validation issues as documented; breaking change suppression is handled through board approval and correct labeling, not through pipeline suppression.\n5. **Monitor and Respond to Feedback:** After applying the appropriate label and/or updating your spec, monitor your PR for review feedback and validation reruns.\n\n**Actionable Next Steps:**\n- If the change is a bug fix, apply `BreakingChange-Approved-BugFix` to your PR.\n- If the change is benign, apply `BreakingChange-Approved-Benign`.\n- If this is a new feature, create a new API version and update your spec accordingly.\n- Ensure your PR is targeting the correct branch (`main` for public, `RPSaaSMaster` for private).\n\nFor more details, review the deep-dive on breaking changes and versioning in the references below.",
            "reference_urls": [
                "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep",
                "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-brch-deep",
                "https://eng.ms/docs/products/azure-developer-experience/design/api-specs/api-versioning",
                "https://eng.ms/docs/products/azure-developer-experience/design/specs-pr-guides/pr-suppressions"
            ]
        },
        "similarity": 4.0,
        "gpt_similarity": 4.0,
        "similarity_result": "pass",
        "similarity_threshold": 4,
        "groundedness": NaN,
        "gpt_groundedness": NaN,
        "groundedness_reason": "",
        "groundedness_result": "unknown",
        "groundedness_threshold": 3.0,
        "response_completeness": 3.0,
        "response_completeness_result": "pass",
        "response_completeness_threshold": 3,
        "response_completeness_reason": "The response is moderately complete: it covers the main breaking change concept, labeling, and versioning, but omits the detailed suppression process and some guidance from the ground truth.",
        "overall_score": 0.0
    },
    {
        "average_score": 2.52,
        "total_evals": 5,
        "similarity_pass_rate": 5,
        "groundedness_pass_rate": 2,
        "response_completeness_pass_rate": 5,
        "similarity_fail_rate": 0,
        "groundedness_fail_rate": 0,
        "response_completeness_fail_rate": 0
    }
]