{
    "action": "opened",
    "issue": {
      "active_lock_reason": null,
      "assignee": null,
      "assignees": [],
      "author_association": "COLLABORATOR",
      "body": "### Library name\r\n\r\nAzure.Messaging.EventHubs\r\n\r\n### Please describe the feature.\r\n\r\nIt would be great if could pass a PartitionKey while creating a new EventData object.\r\n\r\nThis would allow the use of user defined partition keys when adding message via the EventHub output binding's `IAsyncCollector.AddAsync` method.\r\n\r\nThis is desirable over the use of `EventHubProducerClient.SendAsync` due to the fact that `IAsyncCollector.AddAsync` will queue the message and batch behind the scenes in parallel, whereas `EventHubProducerClient.SendAsync` needs to be awaited on each send of a single message or a batch.\r\n\r\nThe two mechanisms behave quite differently from each other and we've seen large performance gains while using the `IAsyncCollector` and `IAsyncCollector.Flush` compared to `EventHubProducerClient.SendAsync`.\r\n\r\n```cs\\nIAsyncCollector collector = from output binding\\nEventData message = new EventData(data);\\nawait collector.AddAsync(message);      <-- returns immediately and is sent in parallel\\n...\\nmore stuff\\n...\\nawait collector.Flush();      <-- waits for remaining messages to send\\n```\\nvs\\n```cs\\nEventHubProducerClient client = from output binding\\nEventData message = new EventData(data);\\nawait client.SendAsync(message);      <-- waits for the send operation before returning\\n```\r\n\r\nThis is similar to some of the comments in https://github.com/Azure/azure-sdk-for-net/issues/28245 but it's not the same as the issue itself.\r\n\r\nWe've done some testing using the `EventHubsModelFactory.EventData` testing method and verified the partition key when set via this method appears to be used correctly by `IAsyncCollector` and the events do in fact send and arrive downstream in the correct batches with the set partition.\r\n\r\nClearly, we can't use this testing and mocking method for production though. \r\n\r\nOr maybe there's another way to use the `IAsyncCollector`?\r\n\r\nThanks :-)",
      "closed_at": null,
      "comments": 0,
      "comments_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4/comments",
      "created_at": "2023-02-10T19:08:47Z",
      "events_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4/events",
      "html_url": "https://github.com/Azure/azure-sdk-fake/issues/4",
      "id": 1580188561,
      "labels": [],
      "labels_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4/labels{/name}",
      "locked": false,
      "milestone": null,
      "node_id": "I_kwDOInEoF85eL8OR",
      "number": 4,
      "performed_via_github_app": null,
      "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4/reactions"
      },
      "repository_url": "https://api.github.com/repos/Azure/azure-sdk-fake",
      "state": "open",
      "state_reason": null,
      "timeline_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4/timeline",
      "title": "[FakeIssueForTesting][FEATURE REQ] Azure Function EventHub allow passing of the PartitionKey in the EventData ctor",
      "updated_at": "2023-02-10T19:08:47Z",
      "url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/4",
      "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13556087?v=4",
        "events_url": "https://api.github.com/users/FakeUser1/events{/privacy}",
        "followers_url": "https://api.github.com/users/FakeUser1/followers",
        "following_url": "https://api.github.com/users/FakeUser1/following{/other_user}",
        "gists_url": "https://api.github.com/users/FakeUser1/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/FakeUser1",
        "id": 13556087,
        "login": "FakeUser1",
        "node_id": "MDQ6VXNlcjEzNTU2MDg3",
        "organizations_url": "https://api.github.com/users/FakeUser1/orgs",
        "received_events_url": "https://api.github.com/users/FakeUser1/received_events",
        "repos_url": "https://api.github.com/users/FakeUser1/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/FakeUser1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/FakeUser1/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/FakeUser1"
      }
    },
    "repository": {
      "allow_forking": true,
      "archive_url": "https://api.github.com/repos/Azure/azure-sdk-fake/{archive_format}{/ref}",
      "archived": false,
      "assignees_url": "https://api.github.com/repos/Azure/azure-sdk-fake/assignees{/user}",
      "blobs_url": "https://api.github.com/repos/Azure/azure-sdk-fake/git/blobs{/sha}",
      "branches_url": "https://api.github.com/repos/Azure/azure-sdk-fake/branches{/branch}",
      "clone_url": "https://github.com/Azure/azure-sdk-fake.git",
      "collaborators_url": "https://api.github.com/repos/Azure/azure-sdk-fake/collaborators{/collaborator}",
      "comments_url": "https://api.github.com/repos/Azure/azure-sdk-fake/comments{/number}",
      "commits_url": "https://api.github.com/repos/Azure/azure-sdk-fake/commits{/sha}",
      "compare_url": "https://api.github.com/repos/Azure/azure-sdk-fake/compare/{base}...{head}",
      "contents_url": "https://api.github.com/repos/Azure/azure-sdk-fake/contents/{+path}",
      "contributors_url": "https://api.github.com/repos/Azure/azure-sdk-fake/contributors",
      "created_at": "2022-12-13T16:41:25Z",
      "default_branch": "main",
      "deployments_url": "https://api.github.com/repos/Azure/azure-sdk-fake/deployments",
      "description": "Used for testing our github-event-processor tooling for github actions",
      "disabled": false,
      "downloads_url": "https://api.github.com/repos/Azure/azure-sdk-fake/downloads",
      "events_url": "https://api.github.com/repos/Azure/azure-sdk-fake/events",
      "fork": false,
      "forks": 0,
      "forks_count": 0,
      "forks_url": "https://api.github.com/repos/Azure/azure-sdk-fake/forks",
      "full_name": "Azure/azure-sdk-fake",
      "git_commits_url": "https://api.github.com/repos/Azure/azure-sdk-fake/git/commits{/sha}",
      "git_refs_url": "https://api.github.com/repos/Azure/azure-sdk-fake/git/refs{/sha}",
      "git_tags_url": "https://api.github.com/repos/Azure/azure-sdk-fake/git/tags{/sha}",
      "git_url": "git://github.com/Azure/azure-sdk-fake.git",
      "has_discussions": false,
      "has_downloads": true,
      "has_issues": true,
      "has_pages": false,
      "has_projects": true,
      "has_wiki": true,
      "homepage": null,
      "hooks_url": "https://api.github.com/repos/Azure/azure-sdk-fake/hooks",
      "html_url": "https://github.com/Azure/azure-sdk-fake",
      "id": 577841175,
      "is_template": false,
      "issue_comment_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/comments{/number}",
      "issue_events_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues/events{/number}",
      "issues_url": "https://api.github.com/repos/Azure/azure-sdk-fake/issues{/number}",
      "keys_url": "https://api.github.com/repos/Azure/azure-sdk-fake/keys{/key_id}",
      "labels_url": "https://api.github.com/repos/Azure/azure-sdk-fake/labels{/name}",
      "language": "C#",
      "languages_url": "https://api.github.com/repos/Azure/azure-sdk-fake/languages",
      "license": null,
      "merges_url": "https://api.github.com/repos/Azure/azure-sdk-fake/merges",
      "milestones_url": "https://api.github.com/repos/Azure/azure-sdk-fake/milestones{/number}",
      "mirror_url": null,
      "name": "azure-sdk-fake",
      "node_id": "R_kgDOInEoFw",
      "notifications_url": "https://api.github.com/repos/Azure/azure-sdk-fake/notifications{?since,all,participating}",
      "open_issues": 4,
      "open_issues_count": 4,
      "owner": {
        "avatar_url": "https://avatars.githubusercontent.com/u/53356347?v=4",
        "events_url": "https://api.github.com/users/azure-sdk/events{/privacy}",
        "followers_url": "https://api.github.com/users/azure-sdk/followers",
        "following_url": "https://api.github.com/users/azure-sdk/following{/other_user}",
        "gists_url": "https://api.github.com/users/azure-sdk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/azure-sdk",
        "id": 53356347,
        "login": "azure-sdk",
        "node_id": "MDQ6VXNlcjUzMzU2MzQ3",
        "organizations_url": "https://api.github.com/users/azure-sdk/orgs",
        "received_events_url": "https://api.github.com/users/azure-sdk/received_events",
        "repos_url": "https://api.github.com/users/azure-sdk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/azure-sdk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/azure-sdk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/azure-sdk"
      },
      "private": false,
      "pulls_url": "https://api.github.com/repos/Azure/azure-sdk-fake/pulls{/number}",
      "pushed_at": "2023-02-08T00:59:23Z",
      "releases_url": "https://api.github.com/repos/Azure/azure-sdk-fake/releases{/id}",
      "size": 429,
      "ssh_url": "git@github.com:Azure/azure-sdk-fake.git",
      "stargazers_count": 1,
      "stargazers_url": "https://api.github.com/repos/Azure/azure-sdk-fake/stargazers",
      "statuses_url": "https://api.github.com/repos/Azure/azure-sdk-fake/statuses/{sha}",
      "subscribers_url": "https://api.github.com/repos/Azure/azure-sdk-fake/subscribers",
      "subscription_url": "https://api.github.com/repos/Azure/azure-sdk-fake/subscription",
      "svn_url": "https://github.com/Azure/azure-sdk-fake",
      "tags_url": "https://api.github.com/repos/Azure/azure-sdk-fake/tags",
      "teams_url": "https://api.github.com/repos/Azure/azure-sdk-fake/teams",
      "topics": [],
      "trees_url": "https://api.github.com/repos/Azure/azure-sdk-fake/git/trees{/sha}",
      "updated_at": "2023-01-30T19:40:49Z",
      "url": "https://api.github.com/repos/Azure/azure-sdk-fake",
      "visibility": "public",
      "watchers": 1,
      "watchers_count": 1,
      "web_commit_signoff_required": false
    },
    "sender": {
      "avatar_url": "https://avatars.githubusercontent.com/u/13556087?v=4",
      "events_url": "https://api.github.com/users/FakeUser1/events{/privacy}",
      "followers_url": "https://api.github.com/users/FakeUser1/followers",
      "following_url": "https://api.github.com/users/FakeUser1/following{/other_user}",
      "gists_url": "https://api.github.com/users/FakeUser1/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/FakeUser1",
      "id": 13556087,
      "login": "FakeUser1",
      "node_id": "MDQ6VXNlcjEzNTU2MDg3",
      "organizations_url": "https://api.github.com/users/FakeUser1/orgs",
      "received_events_url": "https://api.github.com/users/FakeUser1/received_events",
      "repos_url": "https://api.github.com/users/FakeUser1/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/FakeUser1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/FakeUser1/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/FakeUser1"
    }
  }