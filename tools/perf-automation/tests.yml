variables:
- template: /eng/pipelines/templates/variables/globals.yml

jobs:
- job: Test
  timeoutInMinutes: 360
  strategy:
    matrix:
      Net:
        RepoName: 'Azure/azure-sdk-for-net'
      Python:
        RepoName: 'Azure/azure-sdk-for-python'
  # TODO: Move to perf pool before merging
  pool:
    name: 'Azure Pipelines'
    vmImage: 'ubuntu-20.04'
  steps:
  - template: /eng/common/pipelines/templates/steps/sparse-checkout.yml
    parameters:
      Paths:
      - '/*'
      - '!sdk/**/test-recordings/*'
      - '!sdk/**/recordings/*'
      - '!sdk/**/SessionRecords/*'
      - '!sdk/**/session-records/*'
      Repositories:
      - Name: $(RepoName)
        Commitish: main
        WorkingDirectory: $(System.DefaultWorkingDirectory)
      - Name: Azure/azure-sdk-tools
        Commitish: $(Build.SourceVersion)
        WorkingDirectory: $(System.DefaultWorkingDirectory)/azure-sdk-tools

  - script: pwd; ls
