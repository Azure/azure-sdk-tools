import "./changeHistory.tsp";

namespace ApiView;

/** C#: APIRevisionType */
enum ApiRevisionType {
    Manual,
    Automatic,
    PullRequest,
    All
}

/** C#: PackageType */
enum PackageType {
    client,
    mgmt
}

/** C#: ReviewState */
enum ReviewState {
    Open,
    Closed
}

/** C#: ApprovalStatus */
enum ApprovalStatus {
    Pending,
    Approved
}

/** C#: NamespaceReviewStatus */
enum NamespaceReviewStatus {
    NotStarted,
    Pending,
    Approved
}

/** C#: ReviewAssignmentModel */
model ReviewAssignment {
    AssignedBy: string;
    AssignedTo: string;
    AssignedOn: utcDateTime;
}

/** C#: ReviewListModel */
model ReviewList {
    TotalNumberOfReviews: int32;
    Reviews: Array<Review>;
}

/** C#: ReviewRevisionListModel */
model RevisionList {
    TotalNumberOfReviewRevisions: int32;
    APIRevisions: Array<ApiRevision>;
}

/** C#: BaseListitemModel */
model BaseItem {
    Id: string;
    PackageName: string;
    Language: string;
}

/** C#: ReviewListItemModel */
model Review {
    ...BaseItem;
    Subscribers: Array<string>;
    ChangeHistory: Array<ReviewChangeHistory>;
    AssignedReviewers: Array<ReviewAssignment>;
    IsClosed: boolean;
    #deprecated "Use ApiRevision.IsApproved property instead."
    IsApproved: boolean;
    PackageType?: PackageType;
    NamespaceReviewStatus: NamespaceReviewStatus;
    CreatedBy: string;
    CreatedOn: utcDateTime;
    LastUpdatedOn: utcDateTime;
    IsDeleted: boolean;
    ReviewGroupId: string;
    NamespaceApprovalRequestedBy: string;
    NamespaceApprovalRequestedOn?: utcDateTime;
}

/** C#: APIRevisionListItemModel */    
model ApiRevision {
    ...BaseItem;
    ReviewId: Review.Id;
    Files: Array<CodeFile>;
    Label: string;
    ResolvedLabel: string;
    PackageVersion: string;
    ChangeHistory: Array<ApiRevisionChangeHistory>;
    APIRevisionType: ApiRevisionType;
    PullRequestNo?: int32;
    HeadingsOfSectionsWithDiff: Record<Array<int32>>;
    AssignedReviewers: Array<ReviewAssignment>;
    IsApproved: boolean;
    HasAutoGeneratedComments: boolean;
    CopilotReviewInProgress: boolean;
    CopilotReviewJobId: string;
    Approvers: Array<string>;
    CreatedBy: string;
    CreatedOn: utcDateTime;
    LastUpdatedOn: utcDateTime;
    IsDeleted: boolean;
    IsReleased: boolean;
    ViewedBy: Array<string>;
}

/** C#: SamplesRevisionModel */
model SamplesRevision {
    ...BaseItem;
    ReviewId: Review.Id;
    FileId: string;
    OriginalFileId: string;
    OrginalFileName: string;
    CreatedBy: string;
    CreatedOn: utcDateTime;
    Title: string;
    IsDeleted: boolean;
}