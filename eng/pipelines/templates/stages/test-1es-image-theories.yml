extends:
  template: /eng/pipelines/templates/stages/1es-redirect.yml
  parameters:
    stages:
      - stage: 'Investigate'
        variables:
          - template: /eng/pipelines/templates/variables/globals.yml
          - template: /eng/pipelines/templates/variables/image.yml
        jobs:
          - job: 'MacOS'

            pool:
              name: $(MACPOOL)
              vmImage: $(MACVMIMAGE)
              os: macOS

            steps:
              - template: /eng/pipelines/templates/steps/investigate-step-template.yml

          - job: 'MacOS'

            pool:
              name: $(MACPOOL)
              vmImage: $(MACVMIMAGE)
              os: macOS

            steps:
            - pwsh: |
                dotnet --list-sdks
              displayName: 'Run dotnet --list-sdks'

            - pwsh: |
                Get-ChildItem Env: | Format-Table -AutoSize
              displayName: 'Dump Environment'

            - task: UseDotNet@2
              displayName: "Use .NET SDK 9.0.x"
              retryCountOnTaskFailure: 3
              inputs:
                packageType: sdk
                version: 9.0.x
                performMultiLevelLookup: true

            - pwsh: |
                dotnet --list-sdks
              displayName: 'Run dotnet --list-sdks'

            - pwsh: |
                Get-ChildItem Env: | Format-Table -AutoSize
              displayName: 'Dump Environment'

          # - job: 'Windows'

          #   pool:
          #     name: $(WINDOWSPOOL)
          #     image: $(WINDOWSVMIMAGE)
          #     os: windows

          #   steps:
          #     template: /eng/pipelines/templates/steps/investigate-step-template.yml

          # - job: 'Linux'

          #   pool:
          #     name: $(LINUXPOOL)
          #     image: $(LINUXVMIMAGE)
          #     os: linux

          #   steps:
          #     template: /eng/pipelines/templates/steps/investigate-step-template.yml
