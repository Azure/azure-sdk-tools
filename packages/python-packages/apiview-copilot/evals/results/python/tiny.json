[
    {
        "testcase": "small_apiview_few_violations",
        "expected": {
            "comments": [
                {
                    "rule_ids": [
                        "python_design.html#python-client-connection-string"
                    ],
                    "line_no": 10,
                    "bad_code": "connection_string: Optional[str] = None,",
                    "suggestion": "Remove the connection_string parameter from the __init__ method and instead implement a separate from_connection_string class method.",
                    "comment": "The constructor should not accept a connection string per the guideline. Instead, a factory method (from_connection_string) must be provided if supported.",
                    "source": "guideline"
                },
                {
                    "rule_ids": [],
                    "line_no": 171,
                    "bad_code": "ivar list: List[DenseCaption]",
                    "suggestion": "ivar captions: List[DenseCaption]",
                    "comment": "Using 'list' as an attribute name shadows the built-in list type and may be ambiguous. A more descriptive name such as 'captions' would better convey its intent.",
                    "source": "generic"
                },
                {
                    "rule_ids": [
                        "python_design.html#python-models-async"
                    ],
                    "line_no": 382,
                    "bad_code": "class azure.ai.vision.imageanalysis.models.aio.PeopleResult(MutableMapping[str, Any]):",
                    "suggestion": "Remove PeopleResult from the aio sub-namespace and define it only once in the shared models namespace.",
                    "comment": "Models should not be duplicated between the root and aio namespace per the guidelines. Reuse the model from azure.ai.vision.imageanalysis.models.",
                    "source": "guideline"
                }
            ]
        },
        "actual": {
            "comments": [
                {
                    "rule_ids": [],
                    "line_no": 1,
                    "bad_code": "",
                    "suggestion": null,
                    "comment": "Here is a summary of the service described by this APIView:\n\n**Purpose**  \nThis API provides image analysis capabilities that extract visual features from images. It processes image inputs to produce outputs such as captions, dense captions, object detections, people detections, text recognition, smart crop suggestions, and tagging information.\n\n**API Version**  \nThe API version is supported through an `api_version` parameter in the client constructors. No explicit API Version object is provided, and the latest version is not separately documented in the snippet.\n\n**Client Classes**  \nThe service exposes two primary client classes: a synchronous `ImageAnalysisClient` and an asynchronous `ImageAnalysisClient` in the aio namespace. Both clients offer equivalent functionality, differing only in their support for synchronous versus asynchronous operations.\n\n**Functional Overview**  \nThe clients perform image analysis by accepting either raw image data or an image URL along with a list of visual features to derive analysis results. They provide mechanisms to manage resources via context management and include low-level functionality to send HTTP requests. This enables users to submit images for detailed analysis that supports parameters such as language, model version, and additional options without directly enumerating CRUD operations.",
                    "source": "summary"
                },
                {
                    "rule_ids": [
                        "python_design.html#python-client-connection-string"
                    ],
                    "line_no": 10,
                    "bad_code": "connection_string: Optional[str] = None,",
                    "suggestion": null,
                    "comment": "The constructor must not accept a connection_string parameter. Instead, use a separate from_connection_string factory method.",
                    "source": "guideline"
                },
                {
                    "rule_ids": [],
                    "line_no": 171,
                    "bad_code": "ivar list: List[DenseCaption]",
                    "suggestion": "ivar captions: List[DenseCaption]",
                    "comment": "Avoid using 'list' as an attribute name since it shadows the built-in; use a more descriptive name such as 'captions'.",
                    "source": "generic"
                },
                {
                    "rule_ids": [],
                    "line_no": 363,
                    "bad_code": "ivar list: List[DetectedObject]",
                    "suggestion": "ivar items: List[DetectedObject]",
                    "comment": "Rename the attribute to avoid shadowing the built-in 'list'; consider using 'items' or a more descriptive term.",
                    "source": "generic"
                },
                {
                    "rule_ids": [
                        "python_design.html#python-models-async"
                    ],
                    "line_no": 382,
                    "bad_code": "class azure.ai.vision.imageanalysis.models.aio.PeopleResult(MutableMapping[str, Any]):",
                    "suggestion": "class azure.ai.vision.imageanalysis.models.PeopleResult(MutableMapping[str, Any]):",
                    "comment": "Models should not be duplicated in the async sub-namespace; PeopleResult should be defined in the common models namespace.",
                    "source": "guideline"
                },
                {
                    "rule_ids": [],
                    "line_no": 383,
                    "bad_code": "ivar list: List[DetectedPerson]",
                    "suggestion": "ivar items: List[DetectedPerson]",
                    "comment": "Rename the attribute to avoid shadowing the built-in 'list'; consider using 'items' or a more descriptive term.",
                    "source": "generic"
                },
                {
                    "rule_ids": [],
                    "line_no": 423,
                    "bad_code": "ivar list: List[CropRegion]",
                    "suggestion": "ivar items: List[CropRegion]",
                    "comment": "Rename the attribute to avoid shadowing the built-in 'list'; consider using 'items' or a more descriptive term.",
                    "source": "generic"
                },
                {
                    "rule_ids": [],
                    "line_no": 442,
                    "bad_code": "ivar list: List[DetectedTag]",
                    "suggestion": "ivar items: List[DetectedTag]",
                    "comment": "Rename the attribute to avoid shadowing the built-in 'list'; consider using 'items' or a more descriptive term.",
                    "source": "generic"
                }
            ]
        },
        "comments_found": 7,
        "valid_generic_comments": 5,
        "invalid_generic_comments": [],
        "true_positives": 2,
        "false_positives": 0,
        "false_negatives": 0,
        "percent_coverage": 100,
        "rule_matches_wrong_line": 0,
        "wrong_line_details": [],
        "fuzzy_matches": 0,
        "similarity": 4,
        "groundedness": 5,
        "groundedness_reason": "The RESPONSE is fully grounded, accurately and completely reflecting all essential information from the CONTEXT without adding or omitting anything.",
        "overall_score": 97
    },
    {
        "average_score": 97.0,
        "total_evals": 1
    }
]