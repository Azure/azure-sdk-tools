
<div *ngIf="isLoading" class="spinner-border m-3" role="status">
    <span class="visually-hidden">Loading...</span>
</div>
<div *ngIf="codePanelRowSource" class="viewport {{languageSafeName!}}" (click)="onCodePanelItemClick($event)">
  <div *uiScroll="let item of codePanelRowSource; let index = index" class="code-line" [attr.data-node-id]="item.nodeIdHashed" [ngClass]="getClassObject(item.rowClasses)">
    <ng-container *ngIf="item.type === CodePanelRowDatatype.CodeLine || item.type === CodePanelRowDatatype.Documentation">
      <div class="line-actions">
          <span class="line-number first">{{item.lineNumber}}</span>
          <span *ngIf="isDiffView" class="line-number second">{{item.lineNumber}}</span>
          <span class="small toggle-user-comments-btn {{item.toggleCommentsClasses}}"></span>
          <span class="small toggle-documentation-btn {{item.toggleDocumentationClasses}}"></span>
      </div>
      <div class="code-line-content" [style.padding-left.px]="(item.indent * 20)">
          <span *ngFor="let token of item.rowOfTokens" [ngClass]="getClassObject(token.renderClasses)">{{token.value}}</span>
      </div>
    </ng-container>
    <ng-container *ngIf="item.type === 'Diagnostics'">
      <div>
        <span>{{ item.diagnostics.text }} <a *ngIf="item.diagnostics.helpLinkUri" href="{{item.diagnostics.helpLinkUri}}" target="_blank">Details</a></span>
      </div>
    </ng-container>
    <ng-container *ngIf="item.type === 'CommentThread'">
      <app-comment-thread [comments]="item.comments"></app-comment-thread>
    </ng-container>
  </div>
</div>