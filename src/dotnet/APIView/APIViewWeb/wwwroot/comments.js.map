{"version":3,"file":"comments.js","mappings":"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","sources":["webpack://apiview/./src/comments.ts"],"sourcesContent":["$(() => {\r\n    const INVISIBLE = \"invisible\";\r\n    const SEL_CODE_DIAG = \".code-diagnostics\";\r\n    const SEL_COMMENT_ICON = \".icon-comments\";\r\n    const SEL_COMMENT_CELL = \".comment-cell\";\r\n\r\n    let MessageIconAddedToDom = false;\r\n\r\n    $(document).on(\"click\", \".commentable\", e => {\r\n        showCommentBox(e.target.id);\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".line-comment-button\", e => {\r\n        let id = getElementId(e.target);\r\n        if (id) {\r\n            showCommentBox(id);\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".comment-cancel-button\", e => {\r\n        let id = getElementId(e.target);\r\n        if (id) {\r\n            hideCommentBox(id);\r\n            // if a comment was added and then cancelled, and there are no other\r\n            // comments for the thread, we should remove the comments icon.\r\n            if (getCommentsRow(id).find(SEL_COMMENT_CELL).length === 0) {\r\n                getCodeRow(id).find(SEL_COMMENT_ICON).addClass(INVISIBLE);\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#show-comments-checkbox\", e => {\r\n        ensureMessageIconInDOM();\r\n        toggleAllCommentsVisibility(e.target.checked);\r\n    });\r\n\r\n    $(document).on(\"click\", \"#show-system-comments-checkbox\", e => {\r\n        ensureMessageIconInDOM();\r\n        toggleAllDiagnosticsVisibility(e.target.checked);\r\n    });\r\n\r\n    $(document).on(\"click\", SEL_COMMENT_ICON, e => {\r\n        let lineId = getElementId(e.target);\r\n        if (lineId) {\r\n            toggleSingleCommentAndDiagnostics(lineId);\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"submit\", \"form[data-post-update='comments']\", e => {\r\n        const form = <HTMLFormElement><any>$(e.target);\r\n        let lineId = getElementId(e.target);\r\n        if (lineId) {\r\n            let commentRow = getCommentsRow(lineId);\r\n            let serializedForm = form.serializeArray();\r\n            serializedForm.push({ name: \"elementId\", value: lineId });\r\n            serializedForm.push({ name: \"reviewId\", value: getReviewId(e.target) });\r\n            serializedForm.push({ name: \"revisionId\", value: getRevisionId(e.target) });\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: $(form).prop(\"action\"),\r\n                data: $.param(serializedForm)\r\n            }).done(partialViewResult => {\r\n                updateCommentThread(commentRow, partialViewResult);\r\n                addCommentThreadNavigation();\r\n            });\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".review-thread-reply-button\", e => {\r\n        let lineId = getElementId(e.target);\r\n        if (lineId) {\r\n            showCommentBox(lineId);\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".toggle-comments\", e => {\r\n        let lineId = getElementId(e.target);\r\n        if (lineId) {\r\n            toggleComments(lineId);\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".js-edit-comment\", e => {\r\n        let commentId = getCommentId(e.target);\r\n        if (commentId) {\r\n            editComment(commentId);\r\n        }\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"click\", \".js-github\", e => {\r\n        let target = $(e.target);\r\n        let repo = target.attr(\"data-repo\");\r\n        let language = getLanguage(e.target);\r\n\r\n        // Fall back to the repo-language if we don't know the review language,\r\n        // e.g.Go doesn't specify Language yet.\r\n        if (!language) {\r\n          language = target.attr(\"data-repo-language\");\r\n        }\r\n        let commentElement = getCommentElement(getCommentId(e.target)!);\r\n        let comment = commentElement.find(\".js-comment-raw\").html();\r\n        let codeLine = commentElement.closest(\".comment-row\").prev(\".code-line\").find(\".code\");\r\n        let apiViewUrl = \"\";\r\n\r\n        // if creating issue from the convos tab, the link to the code element is in the DOM already.\r\n        let commentUrlElem = codeLine.find(\".comment-url\");\r\n        if (commentUrlElem.length) {\r\n          apiViewUrl = location.protocol + '//' + location.host + escape(commentUrlElem.attr(\"href\")!);\r\n        }\r\n        else {\r\n          // otherwise we construct the link from the current URL and the element ID\r\n          // Double escape the element - this is used as the URL back to API View and GitHub will render one layer of the encoding.\r\n          apiViewUrl = window.location.href.split(\"#\")[0] + \"%23\" + escape(escape(getElementId(commentElement[0])!));\r\n        }\r\n\r\n        let issueBody = escape(\"```\" + language + \"\\n\" + codeLine.text().trim() + \"\\n```\\n#\\n\" + comment);\r\n        // TODO uncomment below once the feature to support public ApiView Reviews is enabled.\r\n        //+ \"\\n#\\n\")\r\n        //+ \"[Created from ApiView comment](\" + apiViewUrl + \")\";\r\n\r\n        window.open(\r\n            \"https://github.com/Azure/\" + repo + \"/issues/new?\" +\r\n            \"&body=\" + issueBody,\r\n            '_blank');\r\n        e.preventDefault();\r\n    });\r\n\r\n    $(document).on(\"keydown\", \".new-thread-comment-text\", e => {\r\n        if (e.ctrlKey && (e.keyCode === 10 || e.keyCode === 13)) {\r\n            const form = $(e.target).closest(\"form\");\r\n            if (form) {\r\n                form.submit();\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    });\r\n\r\n    addEventListener(\"hashchange\", e => {\r\n        highlightCurrentRow();\r\n    });\r\n\r\n    addEventListener(\"load\", e => {\r\n        highlightCurrentRow();\r\n        addCommentThreadNavigation();\r\n    });\r\n\r\n    function highlightCurrentRow() {\r\n        if (location.hash.length < 1) return;\r\n        var row = getCodeRow(location.hash.substring(1));\r\n        row.addClass(\"active\");\r\n        row.on(\"animationend\", () => {\r\n            row.removeClass(\"active\");\r\n        });\r\n    }\r\n\r\n    function getReviewId(element: HTMLElement) {\r\n        return getParentData(element, \"data-review-id\");\r\n    }\r\n\r\n    function getLanguage(element: HTMLElement) {\r\n      return getParentData(element, \"data-language\");\r\n    }\r\n\r\n    function getRevisionId(element: HTMLElement) {\r\n        return getParentData(element, \"data-revision-id\");\r\n    }\r\n\r\n    function getElementId(element: HTMLElement) {\r\n        return getParentData(element, \"data-line-id\");\r\n    }\r\n\r\n    function getCommentId(element: HTMLElement) {\r\n        return getParentData(element, \"data-comment-id\");\r\n    }\r\n\r\n    function getParentData(element: HTMLElement, name: string) {\r\n        return $(element).closest(`[${name}]`).attr(name);\r\n    }\r\n\r\n    function toggleComments(id: string) {\r\n        $(getCommentsRow(id)).find(\".comment-holder\").toggle();\r\n    }\r\n\r\n    function editComment(commentId: string) {\r\n        let commentElement = $(getCommentElement(commentId));\r\n        let commentText = commentElement.find(\".js-comment-raw\").html();\r\n        let template = createCommentEditForm(commentId, commentText);\r\n        commentElement.replaceWith(template);\r\n    }\r\n\r\n    function getCommentElement(commentId: string) {\r\n        return $(`.review-comment[data-comment-id='${commentId}']`);\r\n    }\r\n\r\n    function getCommentsRow(id: string) {\r\n        return $(`.comment-row[data-line-id='${id}']`);\r\n    }\r\n\r\n    function getCodeRow(id: string) {\r\n        return $(`.code-line[data-line-id='${id}']`);\r\n    }\r\n\r\n    function getDiagnosticsRow(id: string) {\r\n        return $(`.code-diagnostics[data-line-id='${id}']`);\r\n    }\r\n\r\n    function hideCommentBox(id: string) {\r\n        let commentsRow = getCommentsRow(id);\r\n        commentsRow.find(\".review-thread-reply\").show();\r\n        commentsRow.find(\".comment-form\").hide();\r\n    }\r\n\r\n    function showCommentBox(id: string) {\r\n        let commentForm;\r\n        let commentsRow = getCommentsRow(id);\r\n\r\n        if (commentsRow.length === 0) {\r\n            commentForm = createCommentForm();\r\n            commentsRow =\r\n                $(`<tr class=\"comment-row\" data-line-id=\"${id}\">`)\r\n                    .append($(\"<td colspan=\\\"3\\\">\")\r\n                        .append(commentForm));\r\n\r\n            commentsRow.insertAfter(getDiagnosticsRow(id).get(0) || getCodeRow(id).get(0));\r\n        }\r\n        else {\r\n            // there is a comment row - insert form\r\n            let reply = $(commentsRow).find(\".review-thread-reply\");\r\n            commentForm = $(commentsRow).find(\".comment-form\");\r\n            if (commentForm.length === 0) {\r\n                commentForm = $(createCommentForm()).insertAfter(reply);\r\n            }\r\n            reply.hide();\r\n            commentForm.show();\r\n            commentsRow.show(); // ensure that entire comment row isn't being hidden\r\n        }\r\n\r\n        $(getDiagnosticsRow(id)).show(); // ensure that any code diagnostic for this row is shown in case it was previously hidden\r\n\r\n        // If comment checkbox is unchecked, show the icon for new comment\r\n        if (!($(\"#show-comments-checkbox\").prop(\"checked\"))) {\r\n            toggleCommentIcon(id, true);\r\n        }\r\n\r\n        commentForm.find(\".new-thread-comment-text\").focus();\r\n    }\r\n\r\n    function createCommentForm() {\r\n        return $(\"#js-comment-form-template\").children().clone();\r\n    }\r\n\r\n    function createCommentEditForm(commentId: string, text: string) {\r\n\r\n        let form = $(\"#js-comment-edit-form-template\").children().clone();\r\n        form.find(\".js-comment-id\").val(commentId);\r\n        form.find(\".new-thread-comment-text\").html(text);\r\n        return form;\r\n    }\r\n\r\n    function updateCommentThread(commentBox, partialViewResult) {\r\n        partialViewResult = $.parseHTML(partialViewResult);\r\n        $(commentBox).replaceWith(partialViewResult);\r\n        return false;\r\n    }\r\n\r\n    function toggleAllCommentsVisibility(showComments: boolean) {\r\n        $(SEL_COMMENT_CELL).each(function () {\r\n            var id = getElementId(this);\r\n            if (id) {\r\n                getCommentsRow(id).toggle(showComments);\r\n                toggleCommentIcon(id, !showComments);\r\n            }\r\n        });\r\n    }\r\n\r\n    function toggleAllDiagnosticsVisibility(showComments: boolean) {\r\n        $(SEL_CODE_DIAG).each(function () {\r\n            var id = getElementId(this);\r\n            if (id) {\r\n                getDiagnosticsRow(id).toggle(showComments);\r\n                toggleCommentIcon(id, !showComments);\r\n            }\r\n        });\r\n    }\r\n\r\n    function toggleSingleCommentAndDiagnostics(id: string) {\r\n        getCommentsRow(id).toggle();\r\n        getDiagnosticsRow(id).toggle();\r\n    }\r\n\r\n    function ensureMessageIconInDOM() {\r\n        if (!MessageIconAddedToDom) {\r\n            $(\".line-comment-button-cell\").append(`<span class=\"icon icon-comments ` + INVISIBLE + `\"><i class=\"far fa-comment-alt pt-1 pl-1\"></i></span>`);\r\n            MessageIconAddedToDom = true;\r\n        }\r\n    }\r\n\r\n    function toggleCommentIcon(id, show: boolean) {\r\n        getCodeRow(id).find(SEL_COMMENT_ICON).toggleClass(INVISIBLE, !show);\r\n    }\r\n\r\n    function addCommentThreadNavigation(){\r\n        var commentRows = $('.comment-row');\r\n        commentRows.each(function (index) {\r\n            var commentThreadAnchorId = \"comment-thread-\" + index;\r\n            $(this).find('.comment-thread-anchor').first().prop('id', commentThreadAnchorId);\r\n\r\n            var commentNavigationButtons = $(this).find('.comment-navigation-buttons').last();\r\n            commentNavigationButtons.empty();\r\n\r\n            var nextCommentThreadAnchor = \"comment-thread-\" + (index + 1);\r\n            var previousCommentThreadAnchor = \"comment-thread-\" + (index - 1);\r\n\r\n            if (commentRows.length != 1)\r\n            {\r\n                if (index == 0) {\r\n                    commentNavigationButtons.append(`<a class=\"btn btn btn-outline-secondary\" href=\"#${nextCommentThreadAnchor}\"><i class=\"fa fa-chevron-down\" aria-hidden=\"true\"></i></a>`)\r\n                }\r\n                else if (index == commentRows.length - 1) {\r\n                    commentNavigationButtons.append(`<a class=\"btn btn btn-outline-secondary\" href=\"#${previousCommentThreadAnchor}\"><i class=\"fa fa-chevron-up\" aria-hidden=\"true\"></i></a>`)\r\n                }\r\n                else {\r\n                    commentNavigationButtons.append(`<a class=\"btn btn btn-outline-secondary\" href=\"#${previousCommentThreadAnchor}\"><i class=\"fa fa-chevron-up\" aria-hidden=\"true\"></i></a>`)\r\n                    commentNavigationButtons.append(`<a class=\"btn btn btn-outline-secondary ml-1\" href=\"#${nextCommentThreadAnchor}\"><i class=\"fa fa-chevron-down\" aria-hidden=\"true\"></i></a>`)\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n"],"names":["$","INVISIBLE","SEL_COMMENT_ICON","SEL_COMMENT_CELL","MessageIconAddedToDom","highlightCurrentRow","location","hash","length","row","getCodeRow","substring","addClass","on","removeClass","getRevisionId","element","getParentData","getElementId","getCommentId","name","closest","attr","getCommentElement","commentId","getCommentsRow","id","getDiagnosticsRow","showCommentBox","commentForm","commentsRow","createCommentForm","append","insertAfter","get","reply","find","hide","show","prop","toggleCommentIcon","focus","children","clone","ensureMessageIconInDOM","toggleClass","addCommentThreadNavigation","commentRows","each","index","commentThreadAnchorId","this","first","commentNavigationButtons","last","empty","nextCommentThreadAnchor","previousCommentThreadAnchor","document","e","target","preventDefault","hideCommentBox","showComments","checked","toggle","lineId","form","commentRow","serializedForm","serializeArray","push","value","ajax","type","url","data","param","done","partialViewResult","commentBox","parseHTML","replaceWith","updateCommentThread","commentElement","template","text","val","html","createCommentEditForm","editComment","repo","language","comment","codeLine","prev","apiViewUrl","commentUrlElem","protocol","host","escape","window","href","split","issueBody","trim","open","ctrlKey","keyCode","submit","addEventListener"],"sourceRoot":""}