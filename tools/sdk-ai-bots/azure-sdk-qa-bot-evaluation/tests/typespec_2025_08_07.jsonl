{"testcase": "How to create an Example for a typespec model?", "query": "title: How to create an Example for a typespec model?\n\nquestion: I was going through my Typespec file and adding @example() decorators on top of models but then I was informed by Azure SDK Q&A Bot that Azure API Spec doesn't support the @example() decorator? Instead I'm supposed to create .json files in the examples folder and link it by operaiton id. However, models don't have operation ids? or do they?", "ground_truth": "Here is some documentation on generating required examples: [x-ms-examples example files | TypeSpec Azure](https://azure.github.io/typespec-azure/docs/migrate-swagger/faq/x-ms-examples/).\nNote that the examples that are required for specs at this point are operation examples (which include examples of model serialization in the operations that include those models).  The workflow is:\nDesign your API in TypeSpec\nGenerate an OpenApi doc by compiling your spec\nRun oav to generate examples for each of the operations (oav generates syntactically valid examples with the 'operationId'  and 'title' fields filled in)\nGo through the examples, replace values to make the examples more useful as documentation, and feel free to add  any examples for important scenarios that might be difficult to understand otherwise, or remove redundant examples (although you will need at least one per operation)\nCopy the examples into the `examples/<api-version>/` folder inside your typespec directory and the OpenApi emitter will automatically associate the examples with  the appropriate operatiosn through the 'operationId' in the example file,  using the 'title' field as the title of the example.", "context": "", "response_length": 1186}
{"testcase": "How to version a spread property (ManagedServiceIdentityProperty)?", "query": "title: How to version a spread property (ManagedServiceIdentityProperty)?\n\nquestion: I'm trying to add Managed Identity support and want to avoid a breaking change.\nHowever, adding `...Azure.ResourceManager.ManagedServiceIdentityProperty;` would update all my existing API versions and introduce a breaking change.\nThat's the right way to introduce the MSI property so I can only add it in a new version of my model?\nIf instead I'd directly add to my tracked resource `identity?: Foundations.ManagedServiceIdentity;` I get a warning about this not being valid in the resource envelope.\nAnd how without having to create an entirely separate model. What I want is to introduce the property in a new API version `2025-05-04-preview` only.", "ground_truth": "You can do it using an extension decorator [like this](https://azure.github.io/typespec-azure/playground/?options=%7B%22linterRuleSet%22%3A%7B%22extends%22%3A%5B%22%40azure-tools%2Ftypespec-azure-rulesets%2Fresource-manager%22%5D%7D%7D&c=aW1wb3J0ICJAdHlwZXNwZWMvaHR0cCI7CtIZcmVzdNUZdmVyc2lvbmluZ8wfYXp1cmUtdG9vbHMvyCstxhVjb3Jl3yvIK3Jlc291cmNlLW1hbmFnZXIiOwoKdXNpbmcgSHR0cDvHDFJlc3TIDFbpAI7IEkHESi5Db3JlzhJSx1xNxls7CgovKiogQ29udG9zb8RUxR4gUHJvdmlkZXIg5gCDbWVudCBBUEkuICovCkBhcm3IIE5hbWVzcGFjZQpAc2VydmljZSgjeyB0aXRsZTogIsdXyC1IdWJDbGllbnQiIH0pCkDnAUNlZCjnAL9zKQpuyFAgTWljcm9zb2Z0LtJG7wC2QVBJIMdNc%2BQAoWVudW3oARNzIHsKICDELjIwMjEtMTAtMDEtcHJldmlld8g1xDQgIEB1c2VEZXBlbmRlbmN5KPUBLy7IVi52MV8wX1DGSF8xKcRAYXJtQ29tbW9uVOQBz8cq10jLKctUNcRIYPIAqWAsCv8Axf8Axf8Axf8Axf8AxfgAxTTxAMV95gG4QegBuusB0yDoAvXkAMhtb2RlbCBFbXBsb3llZSBpcyBUcmFja2Vk6ACCPMgcUHJvcGVydGllcz7lAekuLukApuQCm1BhcmFtZXRlcskxPjvGJuYAxGRT5gK1SWRlbnRpdHnHT3k75ACrQEBhZGRlZCjIOy5pxyYs6QJdLvQA6CnnAp%2FIOCBwxlZpZeUCnu4A3cdyxBzoAqlBZ2Ugb2YgZcg%2F5QHZYWdlPzogaW50MzI76AINQ2l0edIqY2l0eT86IHN0cuUED8csUHJvZmls01lAZW5jb2RlKCJiYXNlNjR1cmwi5AHBcMYwPzogYnl0ZXPJSFRoZSBzdGF0dXPES3RoZSBsYXN0IOQAxWF0aW9u5QQiICBAdmlzaWJpbGl0eShMaWZlY3ljbOQCQWFkx13EIOUEsVN0YXTEZ%2BUCDMwU5QGEyHPMMuUAgOUAymHpAjbFd0Bscm%2FEO3VzCnVu5AMT0VTlAWTmARrpA1PEX8hHIGNyZcQncmVxdWVzdCBoYXMgYmVlbiBhY2NlcHRlZMRnICBBxw46ICLICyLWUGnEQOQAtOkAwchE7ACcOiAizA%2FaTHVwZGF0xE%2FFQ1XHDjogIsgLyjvpBcvpAMTmANxk5wGiU3VjY2VlZOUAxckM0z%2FFNuQBTWZhaWzJPkbFDTogIsYJ3Dh3YXMgY2FuY2XKPkPHD%2BQGI8cL%2FwFAIGRlbGXpAYBExA3mAPnICyLpBF7pA3dtb3bqAcrpA3lNb3ZlUscV6ANyxHNtb3bEaGZyb20gbG9j5gC8xW7EE%2FEDUMszdG%2FPMXRvyi%2F3AJVzcG9uc%2BsE7OYAlscW7ACX7gNsxT7FZMZ85gLuzW5pbnRlcmbkB0JP6AOUcyBleHRlbmRz9ggELsspe%2BQE%2BGFybcgjyhvLWegAzeYEs2dldOQBp0HKNeQD5%2B4FceYCe09y5QKn5QHWyy9Dxx1SZXBsYWNlQXN5bmPOP%2BUC98g3Q3VzdG9tUGF0Y2hTxCoKICAg6QCTLMUO9gDnRm91buQDJuQFuMgc5gCRTeQBhMZJ0EvKEOoFqsUZPgogIOUAneYCmu8A1OUCl2VXaXRob3V0T2vzANRsaXN0QnnIMEdyb3Vwz0RMxSJQYXJlbnTUPFN1YnNjcmlw5QJ5xjvGM8wZzDnoBmAgc2FtcGzrA2ZhY8VEdGhhdOYCY%2BkGI3RvIGRpZmZl5ACE7wLmxSnuALJBxUjlAZbIdyzsA3HIDeYC6PMAkkhFQUTqBkzEfmNoZWNr6gCqZXhpc3RlbuYIJyDGHkXJFO8CWM0d7AEJfQo%3D&e=%40azure-tools%2Ftypespec-autorest&vs=%7B%7D):\n```\n/** Contoso Resource Provider management API. */\n@armProviderNamespace\n@service(#{ title: \"ContosoProviderHubClient\" })\n@versioned(Versions)\nnamespace Microsoft.ContosoProviderHub;\n/** Contoso API versions */\nenum Versions {\n/** 2021-10-01-preview version */\n@useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)\n@armCommonTypesVersion(Azure.ResourceManager.CommonTypes.Versions.v5)\n`2021-10-01-preview`,\n/** 2021-10-01-preview version */\n@useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)\n@armCommonTypesVersion(Azure.ResourceManager.CommonTypes.Versions.v5)\n`2024-10-01-preview`,\n}\n/** A ContosoProviderHub resource */\nmodel Employee is TrackedResource<EmployeeProperties> {\n...ResourceNameParameter<Employee>;\n...ManagedServiceIdentityProperty;\n}\n@@added(Employee.identity, Versions.`2024-10-01-preview`);\n/** Employee properties */\nmodel EmployeeProperties {\n/** Age of employee */\nage?: int32;\n/** City of employee */\ncity?: string;\n/** Profile of employee */\n@encode(\"base64url\")\nprofile?: bytes;\n/** The status of the last operation. */\n@visibility(Lifecycle.Read)\nprovisioningState?: ProvisioningState;\n}\n/** The provisioning state of a resource. */\n@lroStatus\nunion ProvisioningState {\nstring,\n/** The resource create request has been accepted */\nAccepted: \"Accepted\",\n/** The resource is being provisioned */\nProvisioning: \"Provisioning\",\n/** The resource is updating */\nUpdating: \"Updating\",\n/** Resource has been created. */\nSucceeded: \"Succeeded\",\n/** Resource creation failed. */\nFailed: \"Failed\",\n/** Resource creation was canceled. */\nCanceled: \"Canceled\",\n/** The resource is being deleted */\nDeleting: \"Deleting\",\n}\n/** Employee move request */\nmodel MoveRequest {\n/** The moving from location */\nfrom: string;\n/** The moving to location */\nto: string;\n}\n/** Employee move response */\nmodel MoveResponse {\n/** The status of the move */\nmovingStatus: string;\n}\ninterface Operations extends Azure.ResourceManager.Operations {}\n@armResourceOperations\ninterface Employees {\nget is ArmResourceRead<Employee>;\ncreateOrUpdate is ArmResourceCreateOrReplaceAsync<Employee>;\nupdate is ArmCustomPatchSync<\nEmployee,\nAzure.ResourceManager.Foundations.ResourceUpdateModel<\nEmployee,\nEmployeeProperties\n>\n>;\ndelete is ArmResourceDeleteWithoutOkAsync<Employee>;\nlistByResourceGroup is ArmResourceListByParent<Employee>;\nlistBySubscription is ArmListBySubscription<Employee>;\n/** A sample resource action that move employee to different location */\nmove is ArmResourceActionSync<Employee, MoveRequest, MoveResponse>;\n/** A sample HEAD operation to check resource existence */\ncheckExistence is ArmResourceCheckExistence<Employee>;\n}\n```", "context": "", "response_length": 4821}
