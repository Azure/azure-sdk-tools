<div class="container-fluid">
    <div class="row">
        <p-table
            [value]="reviews"
            dataKey="id"
            [scrollable]="true"
            scrollHeight="calc(100vh - 70px)"
            responsiveLayout="stack"
            [lazy]="true"
            [lazyLoadOnInit]="false"
            [virtualScroll]="true"
            [virtualScrollDelay]="0"
            [virtualScrollItemSize]="49"
            (onLazyLoad)="onLazyLoad($event)"
            [tableStyle]="{ 'min-width': '50rem' }"
            styleClass="p-datatable-striped p-datatable-sm">
            <!--<ng-template pTemplate="caption">
                <div class="d-flex justify-content-between">
                    <p-button label="Create Reviews" icon="pi pi-plus"></p-button>
                    <span class="p-input-icon-left me-2">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" id="reviews-search" placeholder="Search Reviews..." />
                    </span>
                    <p-button label="Filter Reviews" (click)="rightSideBarVisible = true" icon="pi pi-filter"></p-button>
                </div>
            </ng-template>-->
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:2%">Lanuage</th>
                    <th style="width:auto">Name<p-sortIcon class="ms-2" field="name"></p-sortIcon></th>
                    <th style="width:13%">Author</th>
                    <th style="width:9%">Last Updated<p-sortIcon class="ms-2" field="lastUpdated"></p-sortIcon></th>
                    <th style="width:9%">Details</th>
                    <th style="width:5%">Revs<p-sortIcon class="ms-2" field="noOfRevisions"></p-sortIcon></th>
                </tr>
                <tr>
                    <th>
                        <p-columnFilter id="langauge-filter" field="languages" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="languages" [filter]="false" (onChange)="filter($event.value)" optionLabel="label">
                                    <ng-template let-option pTemplate="item">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ option.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="name" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="author" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="lastUpdated" [showMenu]="false"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter id="details-filter" field="type" matchMode="in" [showMenu]="false">
                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-multiSelect [ngModel]="value" [options]="details" [group]="true" [filter]="false" (onChange)="filter($event.value)" optionLabel="label" scrollHeight="500px">
                                    <ng-template let-group pTemplate="group">
                                        <div class="inline-block vertical-align-middle">
                                            <span class="ml-1 mt-1">{{ group.label }}</span>
                                        </div>
                                    </ng-template>
                                </p-multiSelect>
                            </ng-template>
                        </p-columnFilter>
                    </th>
                    <th>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-review>
                <tr>
                    <td>
                        <img class="float-end" src="assets/images/{{ review.language | languageNames }}-original.svg" alt="{{review.language}}" width="30">
                    </td>
                    <td>{{ review.displayName }}</td>
                    <td class="author-table-data">
                        <img [alt]="review.author" src="https://github.com/{{review.author}}.png?size=40" width="32" />
                        <span>{{ review.author }}</span>
                    </td>
                    <td>{{ review.lastUpdated | timeago }}</td>
                    <td>
                        <i class="{{ badgeClass.get(review.status) }} me-2"></i>
                        <i class="{{ badgeClass.get(review.state) }} me-2"></i>
                        <i class="{{ badgeClass.get(review.type) }}"></i>
                    </td>
                    <td>{{ review.noOfRevisions }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>