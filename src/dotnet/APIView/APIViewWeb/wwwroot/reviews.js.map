{"version":3,"file":"reviews.js","mappings":"yBAAAA,GAAE,KAEA,MAAMC,EAAuBD,EAAG,yBAC1BE,EAAgBF,EAAG,kCACnBG,EAAiBH,EAAG,sCACpBI,EAAYJ,EAAG,kCACfK,EAAeL,EAAG,oCAClBM,EAAaN,EAAG,sBAChBO,EAAeP,EAAG,wBAClBQ,EAAeR,EAAG,wBAClBS,EAAkBT,EAAG,2BACrBU,EAAoBV,EAAG,6BACvBW,EAAiBX,EAAG,0BACpBY,EAAgBZ,EAAG,yBAGnBa,GAFWb,EAAG,cAEFA,EAAE,8BACdc,EAAgBd,EAAE,gBAKxB,SAASe,EAAoBC,EAAO,GAElC,IAAIC,EAAM,0BAEVf,EAAcgB,SAAS,aAAaC,MAAK,WACvCF,EAAMA,EAAM,iBAAmBG,mBAAmB,GAAGpB,EAAEqB,MAAMC,YAG/DnB,EAAee,SAAS,aAAaC,MAAK,WACxCF,EAAMA,EAAM,cAAgBG,mBAAmB,GAAGpB,EAAEqB,MAAMC,YAG5DlB,EAAUc,SAAS,aAAaC,MAAK,WACnCF,EAAMA,EAAM,SAAWG,mBAAmB,GAAGpB,EAAEqB,MAAMC,YAGvDjB,EAAaa,SAAS,aAAaC,MAAK,WACtCF,EAAMA,EAAM,YAAcG,mBAAmB,GAAGpB,EAAEqB,MAAMC,YAU1DL,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,EAAMA,EAAM,WAAaX,EAAWiB,KAAK,YAC7B,aAAehB,EAAagB,KAAK,YACjC,aAAef,EAAae,KAAK,YACjC,gBAAkBd,EAAgBc,KAAK,YACvC,kBAAoBb,EAAkBa,KAAK,YAC3C,eAAiBZ,EAAeY,KAAK,YACrC,cAAgBX,EAAcW,KAAK,YACnC,WAAuB,GAATP,EAC1BC,EAAMO,UAAUP,GAIhBjB,EAAEyB,KAAK,CACLC,IAAKT,IACJU,MAAK,SAASC,GACf3B,EAAqB4B,KAAKD,GAC1BE,OAKJ,SAASA,IAEP9B,EAAG,cAAemB,MAAK,WACrBnB,EAAEqB,MAAMU,GAAG,SAAS,SAASC,GAC3BA,EAAMC,iBACN,IAAIC,EAAYlC,EAAEqB,MAAME,KAAK,QAAQY,MAAM,KACvCnB,EAASkB,EAAUA,EAAUE,OAAS,GACxCpB,MAAAA,IAEFqB,QAAQC,IAAItB,GACZD,EAAoBC,UAM1B,SAASuB,IAEP,MAAMC,EAAc3B,EAAUS,MAAiBmB,cAC/C3B,EAAc4B,QAAQ,MAAMC,YAAY,cAAcC,SACtD9B,EAAc+B,KAAKL,EAAY,CAC7Bb,KAAM,WACJb,EAAcgC,IAAI,cAAcJ,QAAQ,MAAMK,SAAS,iBAjEvD/C,EAAE,2BAA4BgD,UAuEpC,CAAC9C,EAAeC,EAAgBC,EAAWC,GAAc4C,SAAQ,SAASC,EAAOC,GAC/ED,EAAMnB,GAAG,oBAAoB,WAC3BhB,UAKJ,CAACT,EAAYC,EAAcE,EAAiBD,EAAcE,EAAmBC,EAAgBC,GAAeqC,SAAQ,SAASC,EAAOC,GAClID,EAAMnB,GAAG,SAAS,WAChBhB,UAIJe,IAGIjB,EAAUS,OACZiB,IAGF1B,EAAUkB,GAAG,SAAS,WACpBqB,WAAWb,EAAe,W","sources":["webpack://apiview/./src/reviews.ts"],"sourcesContent":["$(() => {\r\n  // Search\r\n  const reviewsFilterPartial = $( '#reviews-list-partial' );\r\n  const pkgNameFilter = $( '#name-filter-bootstraps-select' );\r\n  const languageFilter = $( '#language-filter-bootstraps-select' );\r\n  const tagFilter = $( '#tags-filter-bootstraps-select' );\r\n  const authorFilter = $( '#author-filter-bootstraps-select' );\r\n  const openFilter = $( '#open-filter-check' );\r\n  const closedFilter = $( '#closed-filter-check' );\r\n  const manualFilter = $( '#manual-filter-check' );\r\n  const automaticFilter = $( '#automatic-filter-check' );\r\n  const pullRequestFilter = $( '#pullrequest-filter-check' );\r\n  const approvedFilter = $( '#approved-filter-check' );\r\n  const pendingFilter = $( '#pending-filter-check' );\r\n  const pageLink = $( '.page-link' );\r\n\r\n  const searchBox = $('#reviews-table-search-box');\r\n  const searchContext = $('.review-name') as any;\r\n\r\n  // Enable tooltip\r\n  (<any>$('[data-toggle=\"tooltip\"]')).tooltip();\r\n\r\n  function updateListedReviews(pageNo=0)\r\n  {\r\n    var uri = \"?handler=reviewspartial\";\r\n\r\n    pkgNameFilter.children(\":selected\").each(function() {\r\n      uri = uri + '&packageNames=' + encodeURIComponent(`${$(this).val()}`);\r\n    });\r\n\r\n    languageFilter.children(\":selected\").each(function() {\r\n      uri = uri + '&languages=' + encodeURIComponent(`${$(this).val()}`);\r\n    });\r\n\r\n    tagFilter.children(\":selected\").each(function() {\r\n      uri = uri + '&tags=' + encodeURIComponent(`${$(this).val()}`);\r\n    });\r\n    \r\n    authorFilter.children(\":selected\").each(function() {\r\n      uri = uri + '&authors=' + encodeURIComponent(`${$(this).val()}`);\r\n    });\r\n\r\n    uri = uri + '&isOpen=' + openFilter.prop('checked');\r\n    uri = uri + '&isClosed=' + closedFilter.prop('checked');\r\n    uri = uri + '&isManual=' + manualFilter.prop('checked');\r\n    uri = uri + '&isAutomatic=' + automaticFilter.prop('checked');\r\n    uri = uri + '&isPullRequest=' + pullRequestFilter.prop('checked');\r\n    uri = uri + '&isApproved=' + approvedFilter.prop('checked');\r\n    uri = uri + '&isPending=' + pendingFilter.prop('checked');\r\n    uri = uri + '&offset=' + (pageNo * 50); //50 is the default size of a page\r\n    uri = encodeURI(uri)\r\n\r\n    //$( '#reviews-list-partial' ).load(uri);\r\n\r\n    $.ajax({\r\n      url: uri\r\n    }).done(function(partialViewResult) {\r\n      reviewsFilterPartial.html(partialViewResult);\r\n      addPaginationEventHandlers();\r\n    });\r\n  }\r\n\r\n  // Add onclick handler to pagination\r\n  function addPaginationEventHandlers()\r\n  {\r\n    $( '.page-link' ).each(function() {\r\n      $(this).on('click', function(event){\r\n        event.preventDefault();\r\n        var linkParts = $(this).prop('href').split('/');\r\n        var pageNo = linkParts[linkParts.length - 1];\r\n      if (pageNo !== null && pageNo !== undefined)\r\n      {\r\n        console.log(pageNo);\r\n        updateListedReviews(pageNo);\r\n      }\r\n      });\r\n    });\r\n  }\r\n\r\n  function filterReviews(){\r\n    // highlight matching text using mark.js framework and hide rows that don't match\r\n    const searchText = (searchBox.val() as string).toUpperCase();\r\n    searchContext.closest('tr').removeClass('hidden-row').unmark();\r\n    searchContext.mark(searchText, {\r\n      done: function () {\r\n        searchContext.not(':has(mark)').closest('tr').addClass('hidden-row');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Update when any dropdown is changed\r\n  [pkgNameFilter, languageFilter, tagFilter, authorFilter].forEach(function(value, index) {\r\n    value.on('hidden.bs.select', function() {\r\n      updateListedReviews();\r\n    });\r\n  });\r\n\r\n  // Update when any checkbox is checked\r\n  [openFilter, closedFilter, automaticFilter, manualFilter, pullRequestFilter, approvedFilter, pendingFilter].forEach(function(value, index) {\r\n    value.on('click', function() {\r\n      updateListedReviews();\r\n    });\r\n  });\r\n\r\n  addPaginationEventHandlers();\r\n\r\n  // If already populated from navigating back, filter again\r\n  if (searchBox.val()) {\r\n    filterReviews();\r\n  }\r\n\r\n  searchBox.on('input', function() {\r\n    setTimeout(filterReviews, 300);\r\n  });\r\n});\r\n"],"names":["$","reviewsFilterPartial","pkgNameFilter","languageFilter","tagFilter","authorFilter","openFilter","closedFilter","manualFilter","automaticFilter","pullRequestFilter","approvedFilter","pendingFilter","searchBox","searchContext","updateListedReviews","pageNo","uri","children","each","encodeURIComponent","this","val","prop","encodeURI","ajax","url","done","partialViewResult","html","addPaginationEventHandlers","on","event","preventDefault","linkParts","split","length","console","log","filterReviews","searchText","toUpperCase","closest","removeClass","unmark","mark","not","addClass","tooltip","forEach","value","index","setTimeout"],"sourceRoot":""}