{"testcase": "How to restrict importing typespec files in main based off of versions.", "query": "title: How to restrict importing typespec files in main based off of versions.\n\nquestion: Hi Team,\nWe have 2 imports in our main.tsp to include other resource type tsp files, however we do not want to include one of the resourcetype to the new api version we want to introduce.  Is there a way to do conditional imports based off of version in main?\nThank you in advance!", "ground_truth": "no, you have to mark the models/types and everything that you want to remove with the @removed decorator using the versioning library\nif you are in preview version I think also the policy is to only have a single preview version in the spec repo at the timme now so you could also just delete it", "expected_reference_urls": ["https://azure.github.io/typespec-azure/docs/howtos/arm/versioning"],"context": "", "response_length": 295}
{"testcase": "Description changes across versions?", "query": "title: Description changes across versions?\n\nquestion: Hi, as part of this PR: [Service Fabric Managed Clusters - API version 2025-03-01-preview · Azure/azure-rest-api-specs@599e269](https://github.com/Azure/azure-rest-api-specs/actions/runs/14090043123/job/39464153437?pr=33332)\nMy team wanted to add more details to a model description. This change results in a change in all spec versions generated with Typespec, and causes the Typespec validation to fail if I don't include the changes to the older specs.\nI wanted to know what the best course of action was for passing this check. Since we don't expect updates to our older specs, is it ok to just change the output path in our tspconfig.yaml to only point at the current version of the output spec? Or is there a better way to handle this?", "ground_truth": "Honestly, the best thing is to update your docs and take the update in previous versions (which are likely now more accurately described as well). Documentation updates are not breaking changes, and, if changes are limited to documentation, this should be passed easily by the breaking change board.", "expected_reference_urls": [], "context": "", "response_length": 299}
{"testcase": "Quantum RP, add new filter to offering API", "query": "title: Quantum RP, add new filter to offering API\n\nquestion: Hi team,\n[Quantum [dev]: Add kind (v1/v2) to workspace by 04diiguyi · Pull Request #25310 · Azure/azure-rest-…](https://github.com/Azure/azure-rest-api-specs-pr/pull/25310/commits/e400cd4c150910e6e4837cda4be0ef51bec7b496)\nThe existing function is:\nlistBySubscription is ArmListBySubscription<QuantumSuiteOffer>;\nNow our service supports filter, so I would like to change it to:\n```\nlistBySubscription is ArmListBySubscription<\nQuantumSuiteOffer,\nParameters = {\n/**\n* The filter to apply to the operation. Example: '$filter=kind eq 'v1'\n*/\n@query(\"$filter\")\n$filter?: string;\n}\n>;\n```\nHowever, the versioning breaks. It does not work if I change to:\n```\n@removed(Versions.v2025_11_01_preview)\nlistBySubscription is ArmListBySubscription<QuantumSuiteOffer>;\n@added(Versions.v2025_11_01_preview)\nlistBySubscription is ArmListBySubscription<\nQuantumSuiteOffer,\nParameters = {\n/**\n* The filter to apply to the operation. Example: '$filter=kind eq 'v1'\n*/\n@query(\"$filter\")\n$filter?: string;\n}\n>;\n```\nOr\n```\n@removed(Versions.v2025_11_01_preview)\nlistBySubscription is ArmListBySubscription<QuantumSuiteOffer>;\n@added(Versions.v2025_11_01_preview)\nlistBySubscriptionV2 is ArmListBySubscription<\nQuantumSuiteOffer,\nParameters = {\n/**\n* The filter to apply to the operation. Example: '$filter=kind eq 'v1'\n*/\n@query(\"$filter\")\n$filter?: string;\n}\n>;\n```\nCould anyone provide suggestions how I can fix this issue? Thanks", "ground_truth": "For a case like this, just decorating the filter property with `@added` in the same operation is the simplest mechanism.  Versioning the request and response data in an operation like this is usually the most straightforward way to version an operation.\nFor more complex operation versioning, you can use the remove/rename/sharedRoute mechanism described here: [Versioning | TypeSpec Azure](https://azure.github.io/typespec-azure/docs/howtos/arm/versioning/#converting-an-operation-from-synchronous-to-asynchronous)\nNote also that you should name the property 'filter', the `@query(\"$filter\")` decorator actually sets the name on the wire,  you generally want to follow standard naming rules for parameters:\n```\n// v2 (new preview)\nlistBySubscription is ArmListBySubscription<\nQuantumSuiteOffer,\nParameters = {\n/**\n* The filter to apply to the operation. Example: '$filter=kind eq \"v1\"'\n*/\n@added(Versions.v2025_11_01_preview)\n@query(\"$filter\")\nfilter?: string;\n}\n>;\n```", "context": "", "response_length": 970}

