trigger: none
pr: none 

pool:
  name: azsdk-pool
  demands: ImageOverride -equals ubuntu-24.04

parameters:
- name: TableName
  type: string
  default: 'ProdKpiEvidenceStream'
- name: ReleasePlanWorkItemId
  type: string
  default: ''
- name: TriageWorkItemId
  type: string
  default: ''
- name: TargetServiceTreeId
  type: string
  default: ''

jobs:
  - job: AttestCPEXKPIs
    steps:
      - checkout: self
      - task: AzureCLI@2
        displayName: Complete Attestations for CPEX KPIs
        inputs:
          azureSubscription: opensource-api-connection
          scriptType: pscore
          scriptPath: eng/scripts/Attest-CPEX-KPIs.ps1
          arguments: >
            -TableName "$(TableName)"
            -ReleasePlanWorkItemId "$(ReleasePlanWorkItemId)"
            -TriageWorkItemId "$(TriageWorkItemId)"
            -TargetServiceTreeId "$(TargetServiceTreeId)"